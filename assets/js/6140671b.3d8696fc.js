"use strict";(self.webpackChunkapollo_client=self.webpackChunkapollo_client||[]).push([[8891],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return s}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),d=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),m=d(n),s=r,f=m["".concat(o,".").concat(s)]||m[s]||p[s]||l;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function s(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var d=2;d<l;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},431:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return o},metadata:function(){return d},toc:function(){return u},default:function(){return m}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),i=["components"],c={sidebar_position:3,title:"\uce90\uc2dc\uc5d0 \uc77d\uace0 \uc4f0\uae30"},o="Apollo Cache\uc5d0 \ub370\uc774\ud130 \uc77d\uace0 \uc4f0\uae30",d={unversionedId:"caching/read_write",id:"caching/read_write",isDocsHomePage:!1,title:"\uce90\uc2dc\uc5d0 \uc77d\uace0 \uc4f0\uae30",description:"---",source:"@site/docs/caching/read_write.md",sourceDirName:"caching",slug:"/caching/read_write",permalink:"/docs/caching/read_write",editUrl:"https://github.com/hojunin/apollo-client-docs/docs/caching/read_write.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"\uce90\uc2dc\uc5d0 \uc77d\uace0 \uc4f0\uae30"},sidebar:"tutorialSidebar",previous:{title:"\uce90\uc2dc \uc124\uc815\ud558\uae30",permalink:"/docs/caching/configuration"},next:{title:"\uac00\ube44\uc9c0 \uceec\ub799\uc158",permalink:"/docs/caching/gc_and_eviction"}},u=[{value:"\uae30\ubcf8 GraphQL\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0",id:"\uae30\ubcf8-graphql\ub97c-\uc0ac\uc6a9\ud558\ub294-\uacbd\uc6b0",children:[{value:"readQuery",id:"readquery",children:[],level:3},{value:"writeQuery",id:"writequery",children:[],level:3}],level:2},{value:"\ubd80\ubd84 \ub370\uc774\ud130\ub97c \ud65c\uc6a9\ud558\ub294 \uacbd\uc6b0",id:"\ubd80\ubd84-\ub370\uc774\ud130\ub97c-\ud65c\uc6a9\ud558\ub294-\uacbd\uc6b0",children:[{value:"readFragment",id:"readfragment",children:[],level:3},{value:"writeFragment",id:"writefragment",children:[],level:3}],level:2},{value:"Read/Write\ub85c mutation \uacb0\uacfc update\ud558\uae30",id:"readwrite\ub85c-mutation-\uacb0\uacfc-update\ud558\uae30",children:[],level:2},{value:"\uce90\uc2dc \uc9c1\uc811 \uc870\uc791\ud558\uae30",id:"\uce90\uc2dc-\uc9c1\uc811-\uc870\uc791\ud558\uae30",children:[{value:"modify",id:"modify",children:[],level:3},{value:"Modify utility functions",id:"modify-utility-functions",children:[],level:3}],level:2},{value:"Outtro",id:"outtro",children:[],level:2}],p={toc:u};function m(e){var t=e.components,c=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},p,c,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"apollo-cache\uc5d0-\ub370\uc774\ud130-\uc77d\uace0-\uc4f0\uae30"},"Apollo Cache\uc5d0 \ub370\uc774\ud130 \uc77d\uace0 \uc4f0\uae30"),(0,l.kt)("hr",null),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.apollographql.com/docs/react/caching/cache-interaction/"},"Apollo Docs"),"\ub97c \ubc88\uc5ed \ubc0f \uc758\uc5ed\ud55c \ub0b4\uc6a9\uc785\ub2c8\ub2e4."),(0,l.kt)("hr",null),(0,l.kt)("p",null,"Apollo Client\uac00 \ub9e4 \uc694\uccad\ub9c8\ub2e4 Graphql Server\uc5d0 \ub2e4\ub140\uc624\uc9c0 \uc54a\uace0\ub3c4 \ub370\uc774\ud130\ub97c fetch\ud560 \uc218 \uc788\ub294 \uc774\uc720\uac00 Cache\ub54c\ubb38\uc774\ub77c\uace0 \ub9d0\ud588\ub294\ub370, Cache\uc5d0\ub3c4 \ud5c8\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ubb34\uacb0\ud558\uc9c0 \uc54a\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4. \uc11c\ubc84\uc758 \ub370\uc774\ud130\ub294 \ud56d\uc0c1 \uc633\uc9c0\ub9cc Cache\uc758 \ub370\uc774\ud130\ub294 \ud56d\uc0c1 \uc633\ub2e4\uace0\ub294 \ub204\uad6c\ub3c4 \ubcf4\uc7a5\ud574\uc8fc\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."),(0,l.kt)("p",null,"\ud558\ubb3c\uba70 \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ud574\uc8fc\ub294 cache\ub3c4 \ubb34\uacb0\ud558\uc9c0 \uc54a\uc740\ub370, \uac1c\ubc1c\uc790\uac00 \uc9c1\uc811 cache\ub97c \uc77d\uace0 \uc4f0\ub294 \uacfc\uc815\uc744 \uc5ec\ub7ec\ubc88 \ubc18\ubcf5\ud55c cache\ub294 \uc5bc\ub9c8\ub098 dirty\ud55c \uc0c1\ud0dc\uc77c\uae4c\uc694. \uadf8\ub798\uc11c cache\ub97c \uc77d\uace0 \uc4f0\ub294 \ud589\uc704\ub294 Server\uc5d0\uc11c \uc815\uc758\ub41c type\uacfc client\uc5d0\uc11c \uc815\uc758\ud55c document\ub97c \uae30\ubc18\uc73c\ub85c \uba85\ud655\ud558\uac8c \uc9c4\ud589\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uadf8 \uacfc\uc815\uc744 \uc774 \ubb38\uc11c\uc5d0\uc11c \ub2e4\ub8e8\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("p",null,"\uc544\ub798\ub294 Apollo\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Caching method\uc758 \uc885\ub958\uc785\ub2c8\ub2e4. \ucd1d 5\uac00\uc9c0\uc785\ub2c8\ub2e4."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"STRATEGY"),(0,l.kt)("th",{parentName:"tr",align:null},"API"),(0,l.kt)("th",{parentName:"tr",align:null},"DESCRIPTION"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"GraphQL \ucffc\ub9ac\ub97c \uc0ac\uc6a9\ud560 \ub54c"),(0,l.kt)("td",{parentName:"tr",align:null},"readQuery\xa0/\xa0writeQuery"),(0,l.kt)("td",{parentName:"tr",align:null},"\uae30\ubcf8\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 GraphQL document\ub9cc\uc744 \ud65c\uc6a9\ud55c \ucffc\ub9ac\ub97c \ub2e4\ub8f0 \ub54c \uc501\ub2c8\ub2e4.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Fragment\ub97c \uc0ac\uc6a9\ud560 \ub54c"),(0,l.kt)("td",{parentName:"tr",align:null},"readFragment\xa0/\xa0writeFragment"),(0,l.kt)("td",{parentName:"tr",align:null},"\uce90\uc2dc \uc804\uccb4\uac00 \uc544\ub2cc \uc77c\ubd80 \ub370\uc774\ud130(ex. Fragment) \uac1d\uccb4\ub97c \uc218\uc815\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"GQL\uc774\uace0 \ubb50\uace0 \uadf8\ub0e5 cache\ub97c \uc218\uc815\ud560 \ub54c"),(0,l.kt)("td",{parentName:"tr",align:null},"cache.modify"),(0,l.kt)("td",{parentName:"tr",align:null},"GraphQL \uc5c6\uc774 cache\ub97c \uc870\uc791\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4(\uc704\ud5d8\ud568\ud83d\udc7f )")))),(0,l.kt)("p",null,"\uc704\uc758 5\uac00\uc9c0 \uce90\uc2f1 \uc804\ub7b5 \uc911 \uc0c1\ud669\uc5d0 \ub9de\uac8c, \uc624\ub958\uac00 \ub098\uc9c0\uc54a\uac8c \uc798 \uc0ac\uc6a9\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4."),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\uae30\ubcf8-graphql\ub97c-\uc0ac\uc6a9\ud558\ub294-\uacbd\uc6b0"},"\uae30\ubcf8 GraphQL\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0"),(0,l.kt)("h3",{id:"readquery"},"readQuery"),(0,l.kt)("p",null,"readQuery \uba54\uc18c\ub4dc\ub294 cache\uc5d0\uc11c \ucffc\ub9ac\ub97c \uc77d\uc5b4\uc635\ub2c8\ub2e4. \uccab \uc608\uc2dc\ub294 \uae30\ubcf8\uae30\ub97c \uc704\ud574 Apollo Docs\ub97c \ucc38\uace0\ud558\uace0, \ub098\uba38\uc9c0\ub294 \uc804\ubd80 \uc800\ud76c \ud504\ub85c\uc81d\ud2b8\ub97c \ud65c\uc6a9\ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"//gql document \uc0dd\uc131\nconst READ_TODO = gql`\n    query ReadTodo($id: ID!) {\n        todo(id: $id) {\n            id\n            text\n            completed\n        }\n    }\n`;\n\n// cached data \uc911 id\uac00 5\uc778 \uac1d\uccb4\ub97c \ubd88\ub7ec\uc624\ub294 \uba54\uc18c\ub4dc\nconst { todo } = client.readQuery({\n    query: READ_TODO,\n    variables: {\n        id: 5,\n    },\n});\n")),(0,l.kt)("p",null,"\ucf54\ub4dc\ub97c \ubcf4\uc2dc\uba74, READ_TODO\ub77c\ub294 graphql document\uac00 \uc120\uc5b8\ub418\uc5b4 \uc788\uace0, Apollo Client \uc778\uc2a4\ud134\uc2a4\uc778 client\ub294 \ub0b4\uc7a5 \uba54\uc18c\ub4dc\uc778 readQuery\ub97c \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4. \uc2e4\ud589\ud560 \ub54c option\uc73c\ub85c\ub294 query\uc640 variables\ub97c \ubc1b\ub294\ub370, query\ub294 \uc704\uc5d0 \uc120\uc5b8\ud55c gql document\uace0 variables\ub294 \ucffc\ub9ac\ub97c \uc2e4\ud589\ud560 \ub54c \ub2f4\uc544 \ubcf4\ub0b4\ub294 \ubcc0\uc218\ub97c \ub123\uc73c\uba74 \ub429\ub2c8\ub2e4."),(0,l.kt)("p",null,"\uc8fc\uc758\ud560 \uc810\uc740, \uce90\uc2dc\uc5d0 \ub370\uc774\ud130\uac00 \uc788\uc5b4\uc57c \uc77d\uc5b4\uc62c \uc218 \uc788\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4. \ub2e4\uc74c\uacfc \uac19\uc740 \uacbd\uc6b0\uc5d4 null\uc744 \ub9ac\ud134\ud569\ub2c8\ub2e4."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\ub2e4\ub978 document\ub97c \ub123\uc5c8\ub2e4. (ex \u2192 query : READ_TODOO)"),(0,l.kt)("li",{parentName:"ol"},"\ub2e4\ub978 variables\ub97c \ub123\uc5c8\ub2e4 (ex \u2192 variablse : { id : 7 })"),(0,l.kt)("li",{parentName:"ol"},"\ucffc\ub9ac\ub294 \uc798 \ub0a0\ub838\ub294\ub370 fetch-policy\ub97c no-cache\ub85c \ub450\uace0 \ub0a0\ub838\ub2e4")),(0,l.kt)("p",null,"\uc704\uc640 \uac19\uc740 \uc0c1\ud669\uc774 \uc544\ub2c8\ub77c\uba74 \uc815\uc0c1 \uc2e4\ud589\ub41c \uac83\uc774\uace0 \ub2e4\uc74c\uacfc \uac19\uc740 \uacb0\uacfc\ub97c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"{\n  todo: {\n    __typename: 'Todo', // __typename is automatically included\n    id: 5,\n    text: 'Buy oranges \ud83c\udf4a',\n    completed: true\n  }\n}\n")),(0,l.kt)("p",null,"cache\ub97c \uc77d\ub294\ub370 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4 \ud83d\ude03"),(0,l.kt)("p",null,"\uc5ec\uae30\uc11c \ub610 \uc8fc\uc758\ud560 \uc810\uc740, cache\uc5d0\uc11c \uc77d\uc5b4\uc628 \uc774 \ub370\uc774\ud130\ub97c \uc9c1\uc811 \uc218\uc815\ud558\uba74 \uc548\ub41c\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4. \ub4a4\uc5d0 \ub098\uc62c writeQuery \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud574\uc11c \uc811\uadfc\ud574\uc57c\uc9c0, \uc77c\ubc18 assign \uc5f0\uc0b0\uc790\ub85c \uace0\uce58\ub824\ud558\uba74 \uc548\ub429\ub2c8\ub2e4. writeQuery\ub098 WriteFragment\ub294 \ud0c0\uc785\uc5d0 \uc548\ub9de\uac8c \uace0\uce58\uba74 \uc5d0\ub7ec\ub97c \ubc49\ub294\ub370 \uadf8\ub807\uc9c0 \uc54a\uace0 \ub9c9 \uace0\uce5c \ub2e4\uc74c \ub9cc\uc57d\uc5d0 \ub2e4\ub978 \uacf3\uc5d0\uc11ccache\uac00 \ub370\uc774\ud130\ub97c \uc77d\uc5b4\uc624\ub824\ub294\ub370 \ud558\ub098\uc758 \ud544\ub4dc\ub77c\ub3c4 \uc5c6\ub2e4\uba74 \ub098\uba38\uc9c0 \ub370\uc774\ud130\ub294 \uac70\ub4e4\ub5a0\ub3c4 \uc548\ubcf4\uace0 null\uc744 \ub9ac\ud134\ud558\ub2c8 \uc8fc\uc758\ud558\uc138\uc694. (Apollo 3.0\ubd80\ud130\ub294 \uc548\uadf8\ub7f4\uaebc\uc784)"),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"writequery"},"writeQuery"),(0,l.kt)("p",null,"writeQuery\ub294 cache\uc5d0 \ub370\uc774\ud130\ub97c \uc4f0\ub294 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. cache\uc5d0 \uc4f0\uc5ec\uc9c8 data\uac00 \ucd94\uac00\ub41c\ub2e4\ub294 \uc810 \ub9d0\uace0\ub294readQuery\uc640 \uc0dd\uae40\uc0c8\uac00 \ub611\uac19\uc2b5\ub2c8\ub2e4. \uc800\ud76c \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ud55c\ubc88 \ud14c\uc2a4\ud2b8\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uc544\ub798 \ucf54\ub4dc\ub294 App.tsx\uc5d0\uc11c readQuery\ub85c Articles \ub370\uc774\ud130\ub97c \uc77d\uc5b4\uc624\uace0, \uc0c8\ub85c\uc6b4 \ub370\uc774\ud130\ub97c Articles\uc758 \ub9e8 \uc55e\uc5d0 \ubd99\ud799\ub2c8\ub2e4."),(0,l.kt)("p",null,"*","setTimeout\uc744 \ub123\uc5b4\uc900 \uc774\uc720\ub294 rendering\ub41c \ud6c4 \uc989\uac01 cache\uac00 set\ub418\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"//App.tsx\nuseEffect(() => {\n    setTimeout(() => {\n        // 1. \ud2b9\uc815 document\ub85c \uc77d\uc5b4\uc654\ub358 \ub370\uc774\ud130\ub97c \uce90\uc2dc\uc5d0\uc11c \ub2e4\uc2dc \uc77d\uc5b4\uc635\ub2c8\ub2e4.\n        const prevData = client.readQuery({\n            query: GetArticlesDocument,\n            variables: {\n                boardType: Board_Type.Lfg,\n            },\n        });\n        // 2. \uac1c\ubc1c\uc790\uac00 \uc784\uc758\ub85c \uc0c8 \ub370\uc774\ud130\ub97c \ub9cc\ub4ed\ub2c8\ub2e4.\n        const NewArticle = {\n            __typename: 'Article',\n            id: '3',\n            userId: '189',\n            info: {\n                __typename: 'ArticleInfo',\n                title: '\uc774\uac74 \uc11c\ubc84\uc5d0 \uc5c6\ub294 \ub370\uc774\ud130',\n                content: '\ub0b4\uac00 \uc9c1\uc811 \uce90\uc2dc\uc5d0 \uc4f0\ub294\uac70\uc57c',\n            },\n        };\n        // 3. \ub9cc\ub4e0 \ub370\uc774\ud130\ub97c \uadf8\ub300\ub85c \ub9e8 \uc55e\uc5d0 \ubd99\ud600\uc900 \ub2e4\uc74c cache\uc5d0 writing\ud569\ub2c8\ub2e4.\n        client.writeQuery({\n            query: GetArticlesDocument,\n            variables: {\n                boardType: Board_Type.Lfg,\n            },\n            data: {\n                Articles: [NewArticle, ...prevData?.Articles],\n            },\n        });\n    }, 1000);\n}, []);\n")),(0,l.kt)("p",null,"\uc774\ub7ec\uba74 \uc544\ub798 \uc0ac\uc9c4\ucc98\ub7fc, Mutation \ucf5c\uc740 0\uc778\ub370 \uc0c8\ub85c\uc6b4 \ub370\uc774\ud130 \ud558\ub098\uac00 cache\uc5d0 \uc0dd\uacbc\uc2b5\ub2c8\ub2e4. \uc774\uac74 \uc11c\ubc84\uc5d0 \uc5c6\ub294 \ub370\uc774\ud130\uc785\ub2c8\ub2e4. \uc989, writeQuery\uac19\uc740 cache\uc5d0 \uc4f0\uae30 \ud568\uc218\ub97c \uc798\ubabb \uc0ac\uc6a9\ud558\uba74 \uc11c\ubc84\uc640 \ud074\ub77c\uc774\uc5b8\ud2b8 \uac04 \ub370\uc774\ud130 \ubb34\uacb0\uc131\uc774 \uae68\uc838\ubc84\ub9ac\ub2c8 \uc0ac\uc6a9 \uc2dc \uaf2d \uc8fc\uc758\ud574\uc57c\ud569\ub2c8\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"overview",src:n(7167).Z})),(0,l.kt)("img",{src:n(4801).Z,alt:"\ud33d\uadc4",width:"500",height:"400"}),(0,l.kt)("p",null,"\uc5c6\ub294 \ub370\uc774\ud130\ub85c \ub80c\ub354\ub9c1\ud55c \uacb0\uacfc"),(0,l.kt)("p",null,"reload\ub418\ub294 \uc21c\uac04 \uce90\uc2dc\ub370\uc774\ud130\ub294 \uc5c6\uc5b4\uc9d1\ub2c8\ub2e4. \ub9cc\uc57d \uc11c\ubc84\uc5d0 \ub611\uac19\uc740 \ub3d9\uc791\uc744 \ud558\ub294 mutation\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc791\ub3d9\ud588\ub2e4\uba74 \uacb0\uacfc\ub294 \uadf8\ub300\ub85c\uaca0\uc9c0\ub9cc, \uc544\ub2c8\ub77c\uba74 \uc0ac\uc6a9\uc790\ub294 \uc5b4\ub9ac\ub465\uc808\ud560\uac81\ub2c8\ub2e4."),(0,l.kt)("p",null,"\uc774\ubc88\uc5d4 \uc774\ubbf8 \uc874\uc7ac\ud558\ub358 cache\ub370\uc774\ud130\ub97c \uc218\uc815\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"const NewArticle = {\n    __typename: 'Article',\n    id: '2',\n    userId: '18',\n    info: {\n        __typename: 'ArticleInfo',\n        title: '\uc774\uac74 \uc11c\ubc84\uc5d0 \uc5c6\ub294 \ub370\uc774\ud130',\n        content: '\ub0b4\uac00 \uc9c1\uc811 \uce90\uc2dc\uc5d0 \uc4f0\ub294\uac70\uc57c',\n    },\n};\nclient.writeQuery({\n    query: GetArticleDocument,\n    variables: {\n        boardType: Board_Type.Lfg,\n        id: '2',\n    },\n    data: {\n        Article: NewArticle,\n    },\n});\n")),(0,l.kt)("p",null,"\uc544\ub798 \uc0ac\uc9c4\uacfc \uac19\uc774 \uc67c\ucabd \ub370\uc774\ud130\ub294 \uc774\ubbf8 \uc11c\ubc84\uc5d0 \uc788\ub294 \ub370\uc774\ud130\ub77c query\ud558\uc790\ub9c8\uc790 cache\uc5d0\ub3c4 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub370\uc774\ud130\uc785\ub2c8\ub2e4. \uc774 \uc0c1\ud669\uc5d0\uc11c \ub611\uac19\uc740 id\uc758 \ub370\uc774\ud130\ub97c \ubc14\uafb8\ub2c8 title, content\uac00 \ubc14\ub010 \ubaa8\uc2b5\uc785\ub2c8\ub2e4. \uc0c8\ub85c \uc0dd\uae30\uac70\ub098 \uc0ad\uc81c\ub418\uc9c0 \uc54a\uace0, \ub611\uac19\uc778 CacheId\ub97c \uac00\uc9c4 \uac1d\uccb4\uac00 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,l.kt)("img",{src:n(4534).Z,alt:"before",width:"350",height:"250"}),"-----\x3e",(0,l.kt)("img",{src:n(9066).Z,alt:"before",width:"350",height:"250"}),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\ubd80\ubd84-\ub370\uc774\ud130\ub97c-\ud65c\uc6a9\ud558\ub294-\uacbd\uc6b0"},"\ubd80\ubd84 \ub370\uc774\ud130\ub97c \ud65c\uc6a9\ud558\ub294 \uacbd\uc6b0"),(0,l.kt)("h3",{id:"readfragment"},"readFragment"),(0,l.kt)("p",null,"readFragemnt \uba54\uc18c\ub4dc\ub294 cache\ub41c \ub370\uc774\ud130\uc758 \ubd80\ubd84\uc744 \uc77d\uc5b4\uc635\ub2c8\ub2e4. \uc774 \ub54c, fragment\ub85c \ubb36\uc778 \ub370\uc774\ud130\ub97c \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4. (fragment\uac00 \uc5c6\ub2e4\uba74 \uadf8 \uc790\ub9ac\uc5d0\uc11c \ubb36\uc73c\uba74 \ub429\ub2c8\ub2e4)"),(0,l.kt)("p",null,"\uc704\uc5d0\uc11c \uc124\uba85\ud55c readQuery\uc640 \ub2e4\ub978\uc810\uc740 cacheId\ub97c \ub123\uc5b4\uc918\uc57c \ud55c\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4. (\ub300\uc2e0 variables\uac00 \ud544\uc694 \uc5c6\uc74c)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// graphql/generated/generated.ts\nconst ArticleIdsFragmentDoc = gql`\n    fragment ArticleIds on Article {\n          id\n          userId\n        }\n// App.tsx\nconst info = client.readFragment({\n        id: 'Article:2',\n        fragment: ArticleIdsFragmentDoc,\n});\n")),(0,l.kt)("p",null,"\uc704 \ucf54\ub4dc\ub294 Fragment Document\uc640 id\ub97c \ub118\uaca8\uc11c \ub370\uc774\ud130\ub97c \uc77d\ub294 \uacfc\uc815\uc785\ub2c8\ub2e4. \uc544\ub798 \uc0ac\uc9c4\uc5d0\uc11c id, userId \ud544\ub4dc\ub9cc \uc77d\uc5b4\uc624\ub294\ub370\uc694, \ud2b9\uc815 CacheId\uc758 \ub370\uc774\ud130 \uc548\uc5d0\uc11c \ubcc0\uc218\ub85c \ubc1b\uc740 fragment\uc5d0 \uc815\uc758\ub41c \ud544\ub4dc\ub9cc\uc744 \uc77d\uc5b4\uc628\ub2e4\ub294 \ub73b\uc785\ub2c8\ub2e4."),(0,l.kt)("img",{src:n(6153).Z,alt:"before",width:"400",height:"250"}),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(9699).Z})),(0,l.kt)("p",null,"\uc704 \ucf54\ub4dc\uc5d0\uc11c info\ub97c \ucd9c\ub825\ud574\ubcf8 \uacb0\uacfc"),(0,l.kt)("p",null,"\uc8fc\uc758\ud560 \uc810\uc740, Id\uac00 2\ubc88\uc778 Article\uc774 \uce90\uc2dc\uc5d0 \uc5c6\ub2e4\ub358\uac00, \uadf8 Article\uc740 \ucc3e\uc558\ub294\ub370 \uc548\uc5d0 id\ub098 userId \ud544\ub4dc\uac00 \uc5c6\ub2e4\ub358\uac00 \ud558\uba74, readFragment\uc758 \ub9ac\ud134\uac12 \uc790\uccb4\uac00 null\uc785\ub2c8\ub2e4. (Apollo 3.0 \uc5c5\ub383\ubc84\uc83c\uc5d0\uc120 \uc548\uadf8\ub7f4\uaebc\uc784!)"),(0,l.kt)("h3",{id:"writefragment"},"writeFragment"),(0,l.kt)("p",null,"cache\uc5d0 \uc4f8 data \ud544\ub4dc\uac00 \ucd94\uac00\ub418\uc5c8\ub2e4\ub294 \uc810\uc744 \ube7c\uace4 readFragment\uc640 \ubaa8\uc591\uc774 \ub611\uac19\uc2b5\ub2c8\ub2e4. \uc704\uc5d0 writeQuery\uc5d0\uc11c \uc124\uba85\ud55c \ubaa8\ub4e0 \ub0b4\uc6a9\uc774 \uc5ec\uae30\uc11c\ub3c4 \uc801\uc6a9\ub429\ub2c8\ub2e4. \uc0ac\uc6a9\ubc95\ub9cc \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"client.writeFragment({\n    id: 'Article:2',\n    fragment: ArticleIdsFragmentDoc,\n    data: {\n        userId: '2500',\n    },\n});\n")),(0,l.kt)("p",null,"\uc815\ub9d0 \uac04\ub2e8\ud569\ub2c8\ub2e4. \uc5b4\ub5a4 CacheId\ub97c \uac00\uc9c4 \uac1d\uccb4\uc758 \ud2b9\uc815 fragment\uc758 \ud544\ub4dc \uc911 \uc6d0\ud558\ub294 \ud544\ub4dc\ub97c \ubcc0\uacbd\ud569\ub2c8\ub2e4. \uc704\uc5d0\uc11c\ub294 18\uc600\ub358 userId\ub97c 2500\uc73c\ub85c \ubc14\uafb8\uc5c8\uc2b5\ub2c8\ub2e4. \ub098\uba38\uc9c0 \ub370\uc774\ud130\ub294 \ub611\uac19\uc740 \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("img",{src:n(9219).Z,alt:"Img",width:"300",height:"200"}),"------\x3e",(0,l.kt)("img",{src:n(4402).Z,alt:"Img",width:"300",height:"200"}),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"readwrite\ub85c-mutation-\uacb0\uacfc-update\ud558\uae30"},"Read/Write\ub85c mutation \uacb0\uacfc update\ud558\uae30"),(0,l.kt)("p",null,"mutation\uc740 query\uc640 \ub2e4\ub974\uac8c cache\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc560\ucd08\uc5d0 FetchPolicy\ubd80\ud130 network-only\uc640 no-cache\ubc16\uc5d0 \uc120\ud0dd\ud560 \uc218 \uc5c6\uc8e0. \uadf8\ub798\uc11c Cache\uac00 \uc0dd\uaca8\ub3c4 Root Query \uc544\ub798\ub85c \ub4e4\uc5b4\uc624\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uac1c\ubc1c\uc790\uac00 \uc9c1\uc811 Root Query \uc544\ub798\ub85c \ub123\uc5b4\uc918\uc57c\ud569\ub2c8\ub2e4. (\uadf8\ub798\uc57c \uc0dd\uc131\ub418\ub294 \uc989\uc2dc \ub80c\ub354\ub9c1\ub429\ub2c8\ub2e4)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(6344).Z})),(0,l.kt)("p",null,"Fetch Policy\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \uc124\uba85\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://www.notion.so/Apollo-GraphQL-Fetch-Policy-99c398cc3e7e421298401d9b41e761a7"},"\uc774 \ub9c1\ud06c"),"\ub97c \ucc38\uc870\ud574\uc8fc\uc138\uc694"),(0,l.kt)("p",null,"\uc544\ub798 \ucf54\ub4dc\ub294 \uadf8 \ub3d9\uc791\uc744 \uad6c\ud604\ud55c \uac83\uc785\ub2c8\ub2e4. \uc0dd\uc131\uacfc \ub3d9\uc2dc\uc5d0 update\ud568\uc218\uc5d0\uc11c \ud604\uc7ac cache\ub97c \uc77d\uace0, \uc0dd\uc131\ub41c \ub370\uc774\ud130\ub791 \ud569\uccd0\uc11c cache\uc5d0 \uc4f0\ub294 \uac83\uc785\ub2c8\ub2e4. fragment\uac00 \ud3ec\ud568\ub41c \ub370\uc774\ud130\ub77c\uba74 \uba54\uc18c\ub4dc\ub9cc read/writeFragment\ub85c \ubc14\uafd4\uc11c \uc4f0\uc2dc\uba74 \ub429\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"createArticle({\n    variables: {\n        boardType: Board_Type.Lfg,\n        Article: {\n            title: '\ud0c0\uc774\ud2c0 \ud14c\uc2a4\ud2b8',\n            content: '\ucee8\ud150\uce20 \ud14c\uc2a4\ud2b8',\n        },\n    },\n    update: (_, { data }) => {\n        try {\n            const prevData = client.readQuery({\n                query: GetArticlesDocument,\n                variables: {\n                    boardType: Board_Type.Lfg,\n                },\n            });\n            client.writeQuery({\n                query: GetArticlesDocument,\n                variables: {\n                    boardType: Board_Type.Lfg,\n                },\n                data: {\n                    Articles: [...prevData.Articles, data?.createArticle],\n                },\n                broadcast: true,\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    },\n});\n")),(0,l.kt)("h2",{id:"\uce90\uc2dc-\uc9c1\uc811-\uc870\uc791\ud558\uae30"},"\uce90\uc2dc \uc9c1\uc811 \uc870\uc791\ud558\uae30"),(0,l.kt)("h3",{id:"modify"},"modify"),(0,l.kt)("p",null,"modify \uba54\uc18c\ub4dc\ub294 \uce90\uc2dc\ub97c \uadf8\ub0e5 \ubcc0\uc218\ucc98\ub7fc \ubcc0\uacbd\ud560 \uc218 \uc788\uac8c \ud574\uc90d\ub2c8\ub2e4. Docs\uc5d0\uc120 directly modify cache\ub77c\ub294 \ud45c\ud604\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uc9c1\uc811 \uc811\uadfc\ud574\uc11c \uc0ad\uc81c\ub098 \uc218\uc815\uac19\uc740 \uc791\uc5c5\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4\ub294 \ub73b\uc785\ub2c8\ub2e4. \uae30\ub2a5\uc774 \uc790\uc720\ub85c\uc6b4 \ub9cc\ud07c \ub9e4\uc6b0 \uc704\ud5d8\ud55c \uba54\uc18c\ub4dc\ub77c\uace0 \uc0dd\uac01\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4. modify \uba54\uc18c\ub4dc\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud2b9\uc9d5\ub4e4\uc744 \uac00\uc9d1\ub2c8\ub2e4."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"writeQuery/Fragment\uc640 \uac19\uc774, \ubcc0\uacbd\ub418\uba74 \ubaa8\ub4e0 active query\ub4e4\uc5d0\uac8c broadcast\ub429\ub2c8\ub2e4. (broadcast \uc635\uc158\uc744 false\ub85c \ud574\ub450\uba74 \ubb34\uc2dc\ub429\ub2c8\ub2e4)"),(0,l.kt)("li",{parentName:"ol"},"writeQuery/Fragment\uc640\ub294 \ub2e4\ub974\uac8c, \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 cache\ub370\uc774\ud130\uc5d0\ub294 \uc4f8 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. (modify\uc5d0\ub294 \uc0dd\uc131\uae30\ub2a5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4!)"),(0,l.kt)("li",{parentName:"ol"},"merge function(\ub2e4\uc74c \uae00\uc5d0\uc11c \ub2e4\ub8f0 \uc608\uc815)\uc73c\ub85c incomming \ub370\uc774\ud130\ub97c \uc5b4\ub5bb\uac8c merge\ud560\uaebc\ub0d0\ub97c \uc815\ud558\ub294 merge policy\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub294\ub370, modify \uba54\uc18c\ub4dc\ub294 \uc774 merge function\uc744 \ubb34\uc2dc\ud569\ub2c8\ub2e4. (\uc815\ud655\ud788 \ub9d0\ud558\uba74 override \ud574\ubc84\ub9bc)"),(0,l.kt)("li",{parentName:"ol"},"cache \uc870\uc791 \ud6c4 fetchPolicy\ub97c \uc870\uc791\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. useQuery\uc758 baseOptions \uc911 nextFetchPolicy\ub97c \uc124\uc815\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4(\ub2f9\uc5f0\ud788 cache-first\uac00 \uc88b\uaca0\uc8e0?)")),(0,l.kt)("p",null,"modify \uba54\uc18c\ub4dc\uc758 \uc0ac\uc6a9\ubc95\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\uc635\uc158\uc73c\ub85c id(cacheId)\uc640 fields\ub97c \ub118\uae41\ub2c8\ub2e4(\ud544\uc218)"),(0,l.kt)("li",{parentName:"ol"},"\uce90\uc2dc \uc218\uc815\ud558\ub294 \ucf5c\ubc31\ud568\uc218\ub97c \uc791\uc131\ud569\ub2c8\ub2e4. (\ud544\ub4dc \ud558\ub098\ub2f9 \ud568\uc218 \ud558\ub098\uc529 \uc791\uc131\ud574\uc918\uc57c\ud568) \uc774\uc804 cache\ub97c \ubc1b\uc544\uc11c \ubcc0\uacbd\ud560 \ub370\uc774\ud130\ub97c \ub9ac\ud134\ud558\ub294 \ud568\uc218\uc785\ub2c8\ub2e4. \uc774 \ud568\uc218\ub97c \uc548\ub123\uc5b4\uc8fc\uba74 \uc6d0\ub798 \uac12 \uadf8\ub300\ub85c \ub9ac\ud134\ud569\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ol"},"broadcast\ub098 optimistic\uac19\uc740 \uc120\ud0dd\uc635\uc158\uc744 \ucd94\uac00\ud574\uc90d\ub2c8\ub2e4.")),(0,l.kt)("p",null,"\uc608\uc81c\ub97c \ubcf4\uaca0\uc2b5\ub2c8\ub2e4. modify \uba54\uc18c\ub4dc\ub97c \ud638\ucd9c\ud560 \ub54c \ud544\uc694\ud55c \uc778\uc790\ub97c \ub123\uc5b4\uc90d\ub2c8\ub2e4. cacheId\ub294 Article:2\ub85c \ub123\uc5b4\uc92c\uace0, \ubc14\uafb8\uace0 \uc2f6\uc740 field\ub4e4\uc744 \ub098\uc5f4\ud569\ub2c8\ub2e4. \uac01\uac01 \uc5b4\ub5bb\uac8c \ubc14\uafb8\uace0 \uc2f6\uc740\uc9c0 \uc815\uc758\ud558\ub294 \ucf5c\ubc31\ud568\uc218\ub97c \ub118\uaca8\uc8fc\uace0, \ub9ac\ud134\ub418\ub294 \uac12\ub300\ub85c \ubc14\ub01d\ub2c8\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"userId\ub294 \uc6d0\ub798 \uac12\uc744 id\ub85c \ubc1b\uc544\uc640\uc11c \uc55e\uc5d0 ID\ub77c\ub294 string\uc744 \ubd99\ud600 \ub9ac\ud134\ud574\uc92c\uc2b5\ub2c8\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"info\ub294 \uc6d0\ub798\uac12\uc744 info\ub85c \ubc1b\uc544\uc640\uc11c \uc0c8\ub85c \uc0dd\uc131\ud55c fragement\ub85c \ubcc0\uacbd\ud574\uc92c\uc2b5\ub2c8\ub2e4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// App.tsx\nclient.cache.modify({\n    id: 'Article:2',\n    fields: {\n        userId: (id, _) => {\n            return 'ID' + id;\n        },\n        info: (info, _) => {\n            const newInfo = {\n                __typename: 'ArticleInfo',\n                title: '\uce90\uc2dc \uc5c5\ub370\uc774\ud2b8 \ud14c\uc2a4\ud2b8',\n                content: 'modify method',\n            };\n            return newInfo;\n        },\n    },\n    broadcast: false,\n});\n")),(0,l.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(1912).Z})),(0,l.kt)("p",null,"Docs\uc758 \uc608\uc2dc \uc911 \ud558\ub098\ub97c \ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uc800\ud76c\ub3c4 \ub098\uc911\uc5d0 Article\uc5d0 Comment\uac00 \ubd99\uc73c\uba74 \uc774\ub7f0\ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574\uc57c \ud560\uac81\ub2c8\ub2e4. \uc6d0\ub798 writeFragment \uba54\uc18c\ub4dc\ub294 Fragment\uac00 \uc18d\ud55c \uc0c1\uc704 \uac1d\uccb4\uc758 CacheId\ub97c \ub118\uaca8\uc57c \ud588\ub294\ub370, modify\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 id\ub97c \uc548\ub118\uaca8\ub3c4 \ub429\ub2c8\ub2e4."),(0,l.kt)("p",null,"mutation\uc758 \ud2b9\uc131 \uc0c1 addComment \uc774 \ud638\ucd9c\ub418\ub294 \uc21c\uac04 cache\uc5d0 update\ub41c\ub2e4. \ud558\uc9c0\ub9cc \uc774 Posts Query\uac00 \uc774\uac78 \ucd94\uc801\ud558\uace0 \uc788\uc9c4 \uc54a\uc544\uc11c, \uc9c1\uc811 cache update\ub97c \uc5c5\ub370\uc774\ud2b8 \ud574\uc918\uc57c\ud55c\ub2e4. \uadf8\ub798\uc11c \uc544\ub798 newCommentRef\ub294 \ucd94\uac00\uc0dd\uc131 \uc5c6\uc774 \uc774\ubbf8 \uc0dd\uc131\ub418\uc5b4\uc788\ub358 \uce90\uc2dc\ub370\uc774\ud130\ub97c \uadf8\ub300\ub85c \ub9ac\ud134\ud574\uc90d\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"const [addComment] = useMutation(ADD_COMMENT, {\n    update(cache, { data: { addComment } }) {\n        cache.modify({\n            id: cache.identify(myPost),\n            fields: {\n                comments(existingCommentRefs = [], _) {\n                    //\uc774\uac74 \uc774\ubbf8 cache\uc5d0 \uc874\uc7ac\ud558\ub294 \ub370\uc774\ud130\uc784\n                    const newCommentRef = cache.writeFragment({\n                        data: addComment,\n                        fragment: gql`\n                            fragment NewComment on Comment {\n                                id\n                                text\n                            }\n                        `,\n                    });\n                    //mutate \ud568\uc218\uc758 \uacb0\uacfc\uac12\uc744 \ubd99\ud600\uc11c \ub9ac\ud134\n                    return [...existingCommentRefs, newCommentRef];\n                },\n            },\n        });\n    },\n});\n")),(0,l.kt)("p",null,"modify \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc8fc\uc758\ud574\uc57c \ud560 \uc810\uc740, \ucf5c\ubc31\ud568\uc218\uc758 \uc778\uc790\uc785\ub2c8\ub2e4. \ucf5c\ubc31\ud568\uc218\uac00 \uac00\uc838\uc624\ub294 \uac12\uc774 \uc77c\ubc18 Scalar\uac12\uc774\uba74 \uadf8\ub0e5 \uadf8 \uac12\uc744 \ub118\uaca8\uc8fc\uace0 \ub9c8\ub294\ub370(ex, userId) \ub9cc\uc57d \uadf8 \uac12\uc774 \ub2e4\ub978 CacheID\ub85c \uad00\ub9ac\ub418\ub294 \ub610 \ub2e4\ub978 cached object\ub77c\uba74 \uc774\uac78 \uc9c1\uc811 \ubcc0\uacbd\ud558\uba74 \uc548\ub429\ub2c8\ub2e4. writeQuery\ub098 writeFragment\ub97c \uc368\uc57c\ud569\ub2c8\ub2e4. \uc774\uac78 \ubc14\uafb8\ub294 \uc21c\uac04 \uc804\uc5ed\uc5d0\uc11c \uc774 object\ub97c \uc4f0\ub294 UI\uc5d0\ub3c4 broadcasting\ub418\ub2c8 \ubcc0\uacbd \uc804\uc5d0 \uc0dd\uac01 \ub9ce\uc774 \ud574\ubcf4\uc154\uc57c\ud569\ub2c8\ub2e4."),(0,l.kt)("h3",{id:"modify-utility-functions"},"Modify utility functions"),(0,l.kt)("p",null,"\uc704\uc758 \uc608\uc2dc\uc5d0\uc11c target field\uc640 \ud568\uaed8 \ub118\uaca8\ubc1b\ub294 \ub450\ubc88\uc9f8 \uc778\uc790(\uc704\uc5d0\uc120 ","_"," \ucc98\ub9ac\ud568)\uac00 \uc788\uc5c8\uc2b5\ub2c8\ub2e4. \uc5ec\uae30\uc5d4 modify \uc2dc \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 utility function\ub4e4\uc774 \ub4e4\uc5b4\uc788\uc2b5\ub2c8\ub2e4. \ud558\ub098\uc529 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},'// \uc544\ub798 \uc758 utilityFunctions\uc5d0 \ub4e4\uc5b4\uc788\ub294 \uac83\ub4e4\uc744 \ud558\ub098\uc529 \uae4c\ubcf4\ub3c4\ub85d \ud558\uc790\ncache.modify({\n    id: "Article:2"\n    fileds:\n            filedName: (targetField, utilityFunctions) => {\n               return `userId = ${id}`;\n            },\n})\n\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"readField")),(0,l.kt)("p",null,"readField\ub294 \ub9d0\uadf8\ub300\ub85c \ud2b9\uc815 \uac1d\uccb4\uc5d0\uc11c \ud2b9\uc815 field\ub97c \uc77d\uc5b4\uc624\ub294 \uba54\uc18c\ub4dc\uc785\ub2c8\ub2e4. \ud2b9\uc815 \ud544\ub4dc\uc774\ub984\uacfc \uc77d\uc73c\ub824\ub294 \uac1d\uccb4\ub97c \ub118\uaca8\uc8fc\uba74 \ub429\ub2c8\ub2e4."),(0,l.kt)("p",null,"\uc544\ub798 \uc608\uc2dc\uc5d0\uc11c\ub294 \uac8c\uc2dc\uae00 \ub370\uc774\ud130\uc5d0\uc11c 'abc123'\uc774\ub77c\ub294 id\ub97c \uac00\uc9c4 Comment\ub97c \ud558\ub098 \uc0ad\uc81c\ud558\ub824\uace0 \ud569\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"const idToRemove = 'abc123';\n\ncache.modify({\n    id: cache.identify(myPost),\n    fields: {\n        comments(existingCommentRefs, { readField }) {\n            return existingCommentRefs.filter((commentRef) => idToRemove !== readField('id', commentRef));\n        },\n    },\n});\n")),(0,l.kt)("p",null,"comments\ub77c\ub294 \ud544\ub4dc\uac00 \uc6d0\ub798 \uac00\uc9c0\uace0 \uc788\ub358 \ub370\uc774\ud130\ub294 existingCommentRefs\uc778\ub370, \uc774 \uc911\uc5d0 \ub0b4\uac00 \uc9c0\uc6b0\uace0 \uc2f6\uc740 \ucf54\uba58\ud2b8\uc758 id\uac00 \uc2e4\uc81c\ub85c \uc788\ub294\uc9c0 \ud655\uc778\ud558\uace0 \uc9c0\uc6b0\ub294 \uacfc\uc815\uc785\ub2c8\ub2e4."),(0,l.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 \ud65c\uc6a9\ub3c4 \uac00\ub2a5\ud569\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 Comment\ub97c \ucd94\uac00\ud560 \ub54c, \uce90\uc2dc\uc5d0 \ud574\ub2f9 \ucf54\uba58\ud2b8\uac00 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uace0, \uc874\uc7ac\ud558\ub294 \ub370\uc774\ud130\uba74 \uc6d0\ub798 \ub370\uc774\ud130\ub97c \ub9ac\ud134, \uc5c6\uc73c\uba74 \uc0c8\ub85c\uc6b4 Comment \uc0dd\uc131 \ub85c\uc9c1\uc744 \uc218\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"if (existingCommentRefs.some((ref) => readField('id', ref) === newComment.id)) {\n    return existingCommentRefs;\n}\n//... create New Comment in Cache\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"DELETE")),(0,l.kt)("p",null,"\ud2b9\uc815 Cache ID\uc5d0\uc11c \ud2b9\uc815 field\ub97c \uc0ad\uc81c\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \uc0ac\uc6a9\ubc95\uc740 DELETE \uac1d\uccb4\ub97c \ubc1b\uc544\uc11c \ub9ac\ud134\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4. \uc800 DELETE \uac1d\uccb4\ub294 \uc544\ub798 \uc0ac\uc9c4\uacfc \uac19\uc774 \ube48 \uac1d\uccb4\uc785\ub2c8\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(2475).Z})),(0,l.kt)("img",{src:n(538).Z,alt:"Example banner",width:"400",height:"200"}),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(7011).Z})),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"INVALIDATE")),(0,l.kt)("p",null,"*","INVALIDATE\uc758 \ud6a8\uacfc\uac00 \uc815\ud655\ud558\uac8c\ub294 \ubb54\uc9c0 \uc798 \ubaa8\ub974\uaca0\ub294\ub370, \ucd94\ud6c4\uc5d0 \uc54c\uac8c\ub418\uba74 \ucd94\uac00\ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("p",null,"\uc77c\ubc18\uc801\uc73c\ub85c \ud2b9\uc815 field\ub97c \uc218\uc815\ud558\uac70\ub098 \uc0ad\uc81c\ud558\uac8c\ub418\uba74 \uadf8 field\ub294 \ubb34\ud6a8\ud654\ub429\ub2c8\ub2e4. \uc774\ubbf8 \ud574\ub2f9 cache \ub370\uc774\ud130\uc758 \uadf8 field \uc774\uc6a9\ud558\uace0 \uc788\ub358 \ucffc\ub9ac\ub4e4 \uc785\uc7a5\uc5d0\uc11c\ub294 \ub2e4\uc2dc \uc77d\uc5b4\uc640\uc57c\uaca0\uc9c0\uc694."),(0,l.kt)("p",null,"\uc774\uc640 \uac19\uc740 \ub3d9\uc791\uc744 cache.modify\ub97c \uc0ac\uc6a9\ud558\uac8c\ub418\uba74 \uc0ad\uc81c\ud558\uac70\ub098 \uc218\uc815\ud558\uc9c0 \uc54a\uc544\ub3c4 \uac00\ub2a5\ud569\ub2c8\ub2e4. INVALIDATE \uac12\uc744 \ub9ac\ud134\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4. \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\ud558\uba74 \ub418\uace0 \ub370\uc774\ud130\ub294 \uadf8\ub300\ub85c\uc778\ub370 \ud574\ub2f9 field\ub294 \ubb34\ud6a8\ud654\ub429\ub2c8\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(8477).Z})),(0,l.kt)("p",null,"\ud2b9\uc815 field\ub9cc \ubb34\ud6a8\ud654\ud558\uace0 \uc2f6\uc744 \ub54c"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"shot",src:n(7013).Z})),(0,l.kt)("p",null,"\ubaa8\ub4e0 field\ub4e4\uc744 \ubb34\ud6a8\ud654\ud558\uace0 \uc2f6\uc744 \ub54c"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"CacheID \uac00\uc838\uc624\uae30"),(0,l.kt)("p",{parentName:"li"},"cache.identify\ub294 CacheID\ub97c \ub9ac\ud134\ud558\ub294 \uba54\uc18c\ub4dc\uc785\ub2c8\ub2e4. CacheID\ub97c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \ud558\uac70\ub098 Deps\uac00 \ub192\uc544 ","_","_","typename\uc744 \ucd94\uc801\ud558\uae30\uac00 \ud798\ub4e4 \ub54c \uc18d\ud3b8\ud558\uac8c \uc774 \uba54\uc18c\ub4dc\ub97c \uc4f0\uba74 cacheID\ub97c \ub9ac\ud134\ud574\uc90d\ub2c8\ub2e4."),(0,l.kt)("p",{parentName:"li"},"\uc544\ub798\uc640 \uac19\uc774 Cache\uc5d4 \uc5c6\uc9c0\ub9cc \uc784\uc758\ub85c Cache Data\ucc98\ub7fc \uc0dd\uae34 NewArticle\uc744 \ub9cc\ub4e4\uc5b4\uc11c identify \uba54\uc18c\ub4dc\uc5d0 \ub123\uc5b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("img",{alt:"shot",src:n(1612).Z})),(0,l.kt)("p",{parentName:"li"},"\uc2e4\uc81c cache\uc5d0 \uc5c6\ub294 \ub370\uc774\ud130\ub3c4 CacheID \uacc4\uc0b0\uc774 \uc798 \ub418\ub294\uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("img",{alt:"shot",src:n(384).Z})))),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"outtro"},"Outtro"),(0,l.kt)("p",null,"\ud2b9\ud788 mutation\uc744 \uc0ac\uc6a9\ud560 \ub54c, cache\ub97c \uc9c1\uc811 \uc870\uc791\ud560 \uc77c\uc774 \ub9ce\uc744\uac81\ub2c8\ub2e4. \uc798 \uc0ac\uc6a9\ud558\uba74 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \uadf9\ub300\ud654\ud560 \uc218 \uc788\uc73c\uba74\uc11c \uc131\ub2a5\ub3c4 \uc7a1\uc744 \uc218 \uc788\uc9c0\ub9cc, \uc798\ubabb \uc0ac\uc6a9\ud558\uba74 \ub370\uc774\ud130\uac00 \ud1b5\uc9f8\ub85c \ub0a0\uc544\uac00\ubc84\ub9ac\uac70\ub098 \uc774\uc0c1\ud55c \ub370\uc774\ud130\uac00 \ub80c\ub354\ub9c1\ub418\ub294 \uc624\ub958\uac00 \uc0dd\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub798\uc11c cache\ub9cc\ud07c\uc740 \uc815\ud655\ud558\uac8c \uc54c\uace0 \uc0ac\uc6a9\ud558\uc154\uc57c\ud569\ub2c8\ub2e4."),(0,l.kt)("hr",null))}m.isMDXComponent=!0},538:function(e,t,n){t.Z=n.p+"assets/images/read_12-db865974cc4835270516077109368cce.png"},4801:function(e,t,n){t.Z=n.p+"assets/images/read_2-dbca35d349af10f63d9a3528b8190631.png"},4534:function(e,t,n){t.Z=n.p+"assets/images/read_3-3e1da1ab88bb78cd2f26e7e89437b296.png"},9066:function(e,t,n){t.Z=n.p+"assets/images/read_4-1ec8fe42291f24a6506a41d5bdff2173.png"},6153:function(e,t,n){t.Z=n.p+"assets/images/read_5-3e1da1ab88bb78cd2f26e7e89437b296.png"},9219:function(e,t,n){t.Z=n.p+"assets/images/read_7-3e1da1ab88bb78cd2f26e7e89437b296.png"},4402:function(e,t,n){t.Z=n.p+"assets/images/read_8-22450b7a89b5a890d9709f7f1a5f290c.png"},7167:function(e,t,n){t.Z=n.p+"assets/images/read_1-bc526a961fe782c4977da63a577530a0.png"},1912:function(e,t,n){t.Z=n.p+"assets/images/read_10-1e6554b65f50e3fd1d396fd7cecb1f3a.png"},2475:function(e,t,n){t.Z=n.p+"assets/images/read_11-23415368e987cd050ad871dd9b120180.png"},7011:function(e,t,n){t.Z=n.p+"assets/images/read_13-bad87688ebd7ccd43bf7c1931c056e11.png"},8477:function(e,t,n){t.Z=n.p+"assets/images/read_14-1d4a7c4a41faaf43da456e70d222d22a.png"},7013:function(e,t,n){t.Z=n.p+"assets/images/read_15-8e7289add54888180db782cbd406e4c7.png"},1612:function(e,t,n){t.Z=n.p+"assets/images/read_16-4daa06c229baf2968778a54b7197ee98.png"},384:function(e,t,n){t.Z=n.p+"assets/images/read_17-2efe81f7eee04b4e96ef38e2fae708b3.png"},9699:function(e,t,n){t.Z=n.p+"assets/images/read_6-faed3deff930df06d1323da26a193d02.png"},6344:function(e,t,n){t.Z=n.p+"assets/images/read_9-21862f02180f8d491b5ea1405af5934f.png"}}]);