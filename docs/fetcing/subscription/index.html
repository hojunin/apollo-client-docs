<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apollo Client í•œêµ­ì–´ ë¬¸ì„œ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apollo Client í•œêµ­ì–´ ë¬¸ì„œ Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q748MW528E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q748MW528E",{})</script><title data-react-helmet="true">êµ¬ë…(Subscription) | Apollo Client í•œêµ­ì–´ ë¬¸ì„œ</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.apollo-kr.site/docs/fetcing/subscription"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="êµ¬ë…(Subscription) | Apollo Client í•œêµ­ì–´ ë¬¸ì„œ"><meta data-react-helmet="true" name="description" content="---"><meta data-react-helmet="true" property="og:description" content="---"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.apollo-kr.site/docs/fetcing/subscription"><link data-react-helmet="true" rel="alternate" href="https://www.apollo-kr.site/docs/fetcing/subscription" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.apollo-kr.site/docs/fetcing/subscription" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff7d4088.css">
<link rel="preload" href="/assets/js/runtime~main.748b3031.js" as="script">
<link rel="preload" href="/assets/js/main.1a53649c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apollo_logo.png" alt="Apollo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/apollo_logo.png" alt="Apollo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ ë²ˆì—­ë³¸</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ë¬¸ì„œ ë³´ê¸°</a><a class="navbar__item navbar__link" href="/blog">ë¸”ë¡œê·¸</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hojunin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>ê°œë°œì : HojunIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Apollo Client ì‹œì‘í•˜ê¸°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ì•„í´ë¡œê°€ ë­”ê°€ìš”?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">ë°ì´í„° ì£¼ê³ ë°›ê¸°(fetch)</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/query">ì¿¼ë¦¬(query)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/mutation">ë®¤í…Œì´ì…˜(mutation)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/refetch">ë‹¤ì‹œ ì¡°íšŒí•˜ê¸°(Refetch)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/fetcing/subscription">êµ¬ë…(Subscription)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/fragment">í”„ë˜ê·¸ë¨¼íŠ¸(fragment)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/error_handling">ì—ëŸ¬ ì²˜ë¦¬(Error Handling)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/best_practice">ì¢‹ì€ ì˜ˆì‹œ(Best Practice)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ìºì‹±(cache)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë¡œì»¬ ìƒíƒœ ê´€ë¦¬(Local Satte)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">í˜ì´ì§€ë„¤ì´ì…˜(pagination)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë„¤íŠ¸ì›Œí‚¹(networking)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë„ì›€ì´ ë˜ëŠ” ë„êµ¬ë“¤</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ì„±ëŠ¥ í–¥ìƒì‹œí‚¤ê¸°(performance)</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>êµ¬ë…(Subscriptions)</h1></header><hr><p><a href="https://www.apollographql.com/docs/react/data/subscriptions/" target="_blank" rel="noopener noreferrer">Apollo Docs</a>ë¥¼ ë²ˆì—­ ë° ì˜ì—­í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p><hr><p>GraphQLì€ <a href="https://www.apollographql.com/docs/react/data/queries/" target="_blank" rel="noopener noreferrer">queries</a>Â andÂ <a href="https://www.apollographql.com/docs/react/data/mutations/" target="_blank" rel="noopener noreferrer">mutations</a>ì— ì´ì–´ 3ë²ˆì§¸ë¡œ Subscriptionì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p><p>queryë‚˜ mutationì²˜ëŸ¼ subscriptionë„ graphql serverë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”(fetch) ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ queryì™€ëŠ” ë‹¤ë¥´ê²Œ subscriptionì€ ì˜¤ë˜ ì§€ì†ë˜ë©´ì„œ ë³€í™”í•˜ëŠ” ê²°ê³¼ê°’ì„ ê³„ì† ë³´ë‚´ì¤ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ ì›¹ì†Œì¼“ì„ ì‚¬ìš©í•˜ì—¬ graphql ì„œë²„ì™€ ì—°ê²°ì„ ìœ ì§€í•˜ê³  ì„œë²„ê°€ ë³€ê²½ëœ ì‚¬í•­ì„ ì¶”ì í•˜ì—¬ í•´ë‹¹ ì‚¬í•­ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ì¤ë‹ˆë‹¤(push)</p><p>Subscriptionì€ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ì‘ì—…ê³¼ ê°™ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ëª©ì ì— ë¶€í•©í•˜ëŠ” íƒ€ì…ì˜ ì—°ì‚°ì…ë‹ˆë‹¤</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="ì™œ-êµ³ì´-subscriptionì„-ì‚¬ìš©í•´ì•¼í•˜ë‚˜ìš”">ì™œ êµ³ì´ Subscriptionì„ ì‚¬ìš©í•´ì•¼í•˜ë‚˜ìš”?<a aria-hidden="true" class="hash-link" href="#ì™œ-êµ³ì´-subscriptionì„-ì‚¬ìš©í•´ì•¼í•˜ë‚˜ìš”" title="Direct link to heading">â€‹</a></h2><p>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ í•­ìƒ ëª¨ë“  ë Œë”ë§ ë°ì´í„°ë¥¼ ì„œë²„ì— ë§ì¶° ìµœì‹  ë°ì´í„°ë¡œ ìœ ì§€í•˜ë ¤ê³  Subscriptionì„ ì‚¬ìš©í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ê³  ì‹¶ìœ¼ë©´ ì¼ì • ì£¼ê¸°ë§ˆë‹¤ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” Pollingì´ë‚˜ ë²„íŠ¼ í´ë¦­ê³¼ ê°™ì€ íŠ¹ì • íŠ¸ë¦¬ê±°ì— ê²°ë¶€í•´ ë‹¤ì‹œ ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ëŠ” refetching í•¨ìˆ˜ë¥¼ ì“°ì£ .</p><p>í•˜ì§€ë§Œ ë‹¤ìŒì˜ ê²½ìš°ì—” Subscriptionì„ ì¨ì•¼í•©ë‹ˆë‹¤.</p><ul><li>í° ê°ì²´ì—ì„œ ì‘ì€ ë³€í™”ë¥¼ ê°ì§€í•  ë•Œ. í° ë°ì´í„°ì—ì„œ ì‘ì€ ë°ì´í„° ë³€í™”ë¥¼ ê°ì§€í•˜ë ¤ê³  1ì´ˆì— 1íšŒì”© ì„œë²„ë¥¼ í˜¸ì¶œí•œë‹¤ê³  ìƒê°í•´ë³´ë©´, ê°€ì ¸ì˜¤ëŠ” ê°ì²´ê°€ ê±°ëŒ€í•˜ê¸° ë•Œë¬¸ì— ì†í•´ì…ë‹ˆë‹¤. ëŒ€ì‹ ì—, ì¼ë‹¨ ê°ì²´ì˜ ìµœì´ˆ ìƒíƒœë¥¼ ì¿¼ë¦¬ë¡œ ê°€ì ¸ì˜¤ê³  ë‚˜ë¨¸ì§€ ì—…ë°ì´íŠ¸ ê³¼ì •ì€ ì„œë²„ê°€ ë°”ë€ fieldë§Œ ë‚´ë ¤ë³´ë‚´(push) ì¤„ê²ë‹ˆë‹¤.</li><li>í˜¸ì¶œì‹œê°„ì´ ì‘ê³  ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ì‘ì—…ì„ í•  ë•Œ. ì˜ˆë¥¼ ë“¤ì–´ ì±„íŒ…ì´ ìˆê² ìŠµë‹ˆë‹¤. ì—„ì²­ëƒ” ëŸ‰ì˜ ëŒ€í™” ë°ì´í„° ë¦¬ìŠ¤íŠ¸ ì¤‘ í•˜ë‚˜ê°€ ìƒˆë¡œ ì¶”ê°€ëœë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤. refetchingì€ ì• ì´ˆì— ë°ì´í„°ê°€ ì™”ëŠ”ì§€ë„ ëª¨ë¥´ë‹ˆ ì‚¬ìš©í•  ìˆ˜ ì—†ê³ , pollingì€ ë„ˆë¬´ ë¶€í•˜ê°€ í½ë‹ˆë‹¤.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="subsciprion-ì •ì˜í•˜ê¸°">Subsciprion ì •ì˜í•˜ê¸°<a aria-hidden="true" class="hash-link" href="#subsciprion-ì •ì˜í•˜ê¸°" title="Direct link to heading">â€‹</a></h2><p>queryë‚˜ mutationê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Subscriptionë„ ì •ì˜í•  ë•Œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë‹¨ ë‘˜ë‹¤ ì •ì˜í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="ì„œë²„-íŒŒíŠ¸">ì„œë²„ íŒŒíŠ¸<a aria-hidden="true" class="hash-link" href="#ì„œë²„-íŒŒíŠ¸" title="Direct link to heading">â€‹</a></h3><p>Subscriptioin í•  ëŒ€ìƒì´ ë˜ëŠ” ìŠ¤í‚¤ë§ˆì— Subscription íƒ€ì…ìœ¼ë¡œ ì •ì˜í•´ì¤ë‹ˆë‹¤.</p><p>ì•„ë˜ ë³´ì´ëŠ” ì˜ˆì‹œì˜ commentAddedëŠ” êµ¬ë…í•˜ê³  ìˆëŠ” clientì—ê²Œ ì¸ìë¡œ ë„£ì–´ì¤€ postIDì— í•´ë‹¹í•˜ëŠ” ê¸€ì— ìƒˆë¡œìš´ ì½”ë©˜íŠ¸ê°€ ìƒì„±ë˜ë©´ ì•Œë¦¼ì„ ë³´ë‚¸ë‹¤ëŠ” ëœ»ì˜ subscription ì •ì˜ì…ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Subscription</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">commentAdded</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">postID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì„œë²„ ì¿¼ë¦¬ ì •ì˜ì— ëŒ€í•´ ì´ë³´ë‹¤ ë” ìì„¸í•œ ë‚´ìš©ì€ Apollo Server Docsì— ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="í´ë¼ì´ì–¸íŠ¸-íŒŒíŠ¸">í´ë¼ì´ì–¸íŠ¸ íŒŒíŠ¸<a aria-hidden="true" class="hash-link" href="#í´ë¼ì´ì–¸íŠ¸-íŒŒíŠ¸" title="Direct link to heading">â€‹</a></h3><p>í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œëŠ” ì¿¼ë¦¬ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const </span><span class="token constant" style="color:#36acaa">COMMENTS_SUBSCRIPTION</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gql`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">subscription</span><span class="token plain"> OnCommentAdded</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$postID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    commentAdded</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">postID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$postID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Apollo Clientê°€ onCommentAddedë¥¼ ì‹¤í–‰í•˜ë©´ GraphQL ì„œë²„ê°€ ë‚´ë ¤ì¤„ ë°ì´í„°ë¥¼ ìœ„í•´ listeningì„ ì‹œì‘í•©ë‹ˆë‹¤. ë‹¤ë§Œ ì¿¼ë¦¬ì™€ ë‹¤ë¥´ê²Œ ì¦‰ê° ë°ì´í„°ë¥¼ ë‚´ë ¤ë³´ë‚´ì£¼ëŠ” ê±´ ì•„ë‹ˆê³ , ì„œë²„ ë‹¨ì—ì„œ ë­”ê°€ ë³€í™”ê°€ ìˆì„ ë•Œ ë³´ë‚´ì¤ë‹ˆë‹¤.</p><p>GQL ì„œë²„ê°€ ë°ì´í„°ë¥¼ ë³´ë‚´ê¸°(push) ì‹œì‘í•˜ë©´ ê·¸ ë°ì´í„°ëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¡œ ë‚´ë ¤ë°›ê²Œë©ë‹ˆë‹¤. data í•„ë“œ ì•„ë˜subscription ì´ë¦„ì´ ìˆê³ , ê·¸ ì•„ë˜ ë°›ê¸°ë¡œ í–ˆë˜ fieldë“¤ì´ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;commentAdded&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;What a thoughtful and well written post!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="subscriptionì„-ìœ„í•œ-ì¤€ë¹„"><a href="https://www.apollographql.com/docs/react/data/subscriptions/#setting-up-the-transport" target="_blank" rel="noopener noreferrer">Subscription</a>ì„ ìœ„í•œ ì¤€ë¹„<a aria-hidden="true" class="hash-link" href="#subscriptionì„-ìœ„í•œ-ì¤€ë¹„" title="Direct link to heading">â€‹</a></h2><p>Subscriptionì´ ì§€ì†ì ìœ¼ë¡œ ì„œë²„ì™€ ì—°ê²°ì„ í•´ì•¼í•˜ëŠ” íŠ¹ì„± ë•Œë¬¸ì— queryë‚˜ mutationì„ ìœ„í•´ ì‚¬ìš©í–ˆë˜ ê¸°ë³¸ HTTP í†µì‹ ì„ ì“¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ ëŒ€ì‹ ì— Apollo Client Subscriptionì€ ê°€ì¥ ì˜ ì•Œë ¤ì§„ ì‹¤ì‹œê°„ í†µì‹  ë°©ì‹ì¸ WebSocketì„ ì“°ê² ìŠµë‹ˆë‹¤(<a href="https://github.com/apollographql/subscriptions-transport-ws" target="_blank" rel="noopener noreferrer">subscriptions-transport-ws</a>)</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="1í•„ìš”í•œ-íŒ¨í‚¤ì§€ë¥¼-ì„¤ì¹˜í•©ë‹ˆë‹¤">1.í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.<a aria-hidden="true" class="hash-link" href="#1í•„ìš”í•œ-íŒ¨í‚¤ì§€ë¥¼-ì„¤ì¹˜í•©ë‹ˆë‹¤" title="Direct link to heading">â€‹</a></h3><p><a href="https://www.apollographql.com/docs/react/api/link/introduction/" target="_blank" rel="noopener noreferrer">Apollo Link</a>Â ëŠ” Apollo Clientì˜ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ë¥¼ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ê¶Œê³ ì‚¬í•­ì…ë‹ˆë‹¤.</p><p>WebSocketìœ¼ë¡œ Subscriptionì„ ì´ìš©í•˜ë ¤ë©´ ìš°ë¦¬ link chainì— WebSoketLinkë¥¼ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤. ì´ ë§í¬ëŠ” subscription-transport-ws ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í•„ìš”ë¡œí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì´ê±¸ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> subscriptions-transport-ws</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="2-websocketlinkë¥¼-ì´ˆê¸°í™”í•©ë‹ˆë‹¤">2. WebSocketLinkë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.<a aria-hidden="true" class="hash-link" href="#2-websocketlinkë¥¼-ì´ˆê¸°í™”í•©ë‹ˆë‹¤" title="Direct link to heading">â€‹</a></h3><p>ApolloClientë¥¼ ìƒì„±í–ˆë˜ íŒŒì¼(index.js)ì— WebSocketLink ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸°í™”í•©ë‹ˆë‹¤</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//index.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">WebSocketLink</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client/link/ws&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> wsLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">WebSocketLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ws://localhost:4000/subscriptions&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reconnect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì—¬ê¸°ì„œ ApolloClient ê°ì²´ì˜ uriì™€ ë‹¤ë¥¸ì ì€ GraphQLì„œë²„ì˜ ws://ë¡œ ì‹œì‘í•˜ëŠ” subscription ì „ìš© ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë„£ì–´ì£¼ì…”ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. Apollo Serverë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ ì´ <a href="https://www.apollographql.com/docs/apollo-server/data/subscriptions/#setting-a-subscription-endpoint" target="_blank" rel="noopener noreferrer">ë…ìŠ¤</a>ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="3-split-communication-by-operation-recommended">3. Split communication by operation (recommended)<a aria-hidden="true" class="hash-link" href="#3-split-communication-by-operation-recommended" title="Direct link to heading">â€‹</a></h3><p>Although Apollo ClientÂ <em>can</em>Â use yourÂ <code>WebSocketLink</code>Â to execute all operation types, in most cases it should continue using HTTP for queries and mutations. This is because queries and mutations don&#x27;t require a stateful or long-lasting connection, making HTTP more efficient and scalable if a WebSocket connection isn&#x27;t already present.</p><p>To support this, theÂ <code>@apollo/client</code>Â library provides aÂ <code>split</code>Â function that lets you use one of two differentÂ <code>Link</code>s, according to the result of a boolean check.</p><p>The following example expands on the previous one by initializing both aÂ <code>WebSocketLink</code>Â <em>and</em>Â anÂ <code>HttpLink</code>. It then uses theÂ <code>split</code>Â function to combine those twoÂ <code>Link</code>s into aÂ <em>single</em>Â <code>Link</code>Â that uses one or the other according to the type of operation being executed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> split</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">HttpLink</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> getMainDefinition </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client/utilities&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">WebSocketLink</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client/link/ws&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> httpLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">HttpLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://localhost:4000/graphql&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> wsLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">WebSocketLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ws://localhost:4000/subscriptions&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reconnect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The split function takes three parameters:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// * A function that&#x27;s called for each operation to execute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// * The Link to use for an operation if the function returns a &quot;truthy&quot; value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// * The Link to use for an operation if the function returns a &quot;falsy&quot; value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> splitLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> query </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> definition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getMainDefinition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> definition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OperationDefinition&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> definition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">operation </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;subscription&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wsLink</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpLink</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Using this logic, queries and mutations will use HTTP as normal, and subscriptions will use WebSocket.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="4-provide-the-link-chain-to-apollo-client"><a href="https://www.apollographql.com/docs/react/data/subscriptions/#4-provide-the-link-chain-to-apollo-client" target="_blank" rel="noopener noreferrer">4. Provide the link chain to Apollo Client</a><a aria-hidden="true" class="hash-link" href="#4-provide-the-link-chain-to-apollo-client" title="Direct link to heading">â€‹</a></h3><p>After you define your link chain, you provide it to Apollo Client via theÂ <code>link</code>Â constructor option:</p><p>index.js</p><p><strong>Copy</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">ApolloClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">InMemoryCache</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...code from the above example goes here...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ApolloClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> splitLink</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cache</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">InMemoryCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>If you provide theÂ linkÂ option, it takes precedence over theÂ uriÂ option (uriÂ sets up a default HTTP link chain using the provided URL).</p></blockquote><h3 class="anchor anchorWithStickyNavbar_31ik" id="5-authenticate-over-websocket-optional"><a href="https://www.apollographql.com/docs/react/data/subscriptions/#5-authenticate-over-websocket-optional" target="_blank" rel="noopener noreferrer">5. Authenticate over WebSocket (optional)</a><a aria-hidden="true" class="hash-link" href="#5-authenticate-over-websocket-optional" title="Direct link to heading">â€‹</a></h3><p>It is often necessary to authenticate a client before allowing it to receive subscription results. To do this, you can provide aÂ <code>connectionParams</code>Â option to theÂ <code>WebSocketLink</code>Â constructor, like so:</p><p><strong>Copy</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">WebSocketLink</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apollo/client/link/ws&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> wsLink </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">WebSocketLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ws://localhost:4000/subscriptions&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reconnect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connectionParams</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> authToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">authToken </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>YourÂ <code>WebSocketLink</code>Â passes theÂ <code>connectionParams</code>Â object to your server whenever it connects. If your server has aÂ <a href="https://www.apollographql.com/docs/graphql-subscriptions/authentication" target="_blank" rel="noopener noreferrer">SubscriptionsServer</a>Â object that&#x27;s listening for WebSocket connections, it receives theÂ <code>connectionParams</code>Â object and can use it to perform authentication, along with any other connection-related tasks.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hojunin/apollo-client-docs/docs/fetcing/subscription.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/fetcing/refetch"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->ë‹¤ì‹œ ì¡°íšŒí•˜ê¸°(Refetch)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/fetcing/fragment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">í”„ë˜ê·¸ë¨¼íŠ¸(fragment)<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ì™œ-êµ³ì´-subscriptionì„-ì‚¬ìš©í•´ì•¼í•˜ë‚˜ìš”" class="table-of-contents__link toc-highlight">ì™œ êµ³ì´ Subscriptionì„ ì‚¬ìš©í•´ì•¼í•˜ë‚˜ìš”?</a></li><li><a href="#subsciprion-ì •ì˜í•˜ê¸°" class="table-of-contents__link toc-highlight">Subsciprion ì •ì˜í•˜ê¸°</a><ul><li><a href="#ì„œë²„-íŒŒíŠ¸" class="table-of-contents__link toc-highlight">ì„œë²„ íŒŒíŠ¸</a></li><li><a href="#í´ë¼ì´ì–¸íŠ¸-íŒŒíŠ¸" class="table-of-contents__link toc-highlight">í´ë¼ì´ì–¸íŠ¸ íŒŒíŠ¸</a></li></ul></li><li><a href="#subscriptionì„-ìœ„í•œ-ì¤€ë¹„" class="table-of-contents__link toc-highlight">Subscriptionì„ ìœ„í•œ ì¤€ë¹„</a><ul><li><a href="#1í•„ìš”í•œ-íŒ¨í‚¤ì§€ë¥¼-ì„¤ì¹˜í•©ë‹ˆë‹¤" class="table-of-contents__link toc-highlight">1.í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</a></li><li><a href="#2-websocketlinkë¥¼-ì´ˆê¸°í™”í•©ë‹ˆë‹¤" class="table-of-contents__link toc-highlight">2. WebSocketLinkë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</a></li><li><a href="#3-split-communication-by-operation-recommended" class="table-of-contents__link toc-highlight">3. Split communication by operation (recommended)</a></li><li><a href="#4-provide-the-link-chain-to-apollo-client" class="table-of-contents__link toc-highlight">4. Provide the link chain to Apollo Client</a></li><li><a href="#5-authenticate-over-websocket-optional" class="table-of-contents__link toc-highlight">5. Authenticate over WebSocket (optional)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">HOJUN IN</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/hojunin/apollo-client-docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">ë¬¸ì˜í•˜ê¸°</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 HojunIn</div></div></div></footer></div>
<script src="/assets/js/runtime~main.748b3031.js"></script>
<script src="/assets/js/main.1a53649c.js"></script>
</body>
</html>