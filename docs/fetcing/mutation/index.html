<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apollo Client í•œêµ­ì–´ ë¬¸ì„œ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apollo Client í•œêµ­ì–´ ë¬¸ì„œ Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q748MW528E"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q748MW528E",{})</script><title data-react-helmet="true">ë®¤í…Œì´ì…˜(mutation) | Apollo Client í•œêµ­ì–´ ë¬¸ì„œ</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.apollo-kr.site/docs/fetcing/mutation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ë®¤í…Œì´ì…˜(mutation) | Apollo Client í•œêµ­ì–´ ë¬¸ì„œ"><meta data-react-helmet="true" name="description" content="---"><meta data-react-helmet="true" property="og:description" content="---"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.apollo-kr.site/docs/fetcing/mutation"><link data-react-helmet="true" rel="alternate" href="https://www.apollo-kr.site/docs/fetcing/mutation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.apollo-kr.site/docs/fetcing/mutation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff7d4088.css">
<link rel="preload" href="/assets/js/runtime~main.748b3031.js" as="script">
<link rel="preload" href="/assets/js/main.1a53649c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/apollo_logo.png" alt="Apollo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/apollo_logo.png" alt="Apollo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ ë²ˆì—­ë³¸</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ë¬¸ì„œ ë³´ê¸°</a><a class="navbar__item navbar__link" href="/blog">ë¸”ë¡œê·¸</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hojunin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>ê°œë°œì : HojunIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Apollo Client ì‹œì‘í•˜ê¸°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ì•„í´ë¡œê°€ ë­”ê°€ìš”?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">ë°ì´í„° ì£¼ê³ ë°›ê¸°(fetch)</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/query">ì¿¼ë¦¬(query)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/fetcing/mutation">ë®¤í…Œì´ì…˜(mutation)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/refetch">ë‹¤ì‹œ ì¡°íšŒí•˜ê¸°(Refetch)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/subscription">êµ¬ë…(Subscription)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/fragment">í”„ë˜ê·¸ë¨¼íŠ¸(fragment)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/error_handling">ì—ëŸ¬ ì²˜ë¦¬(Error Handling)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/fetcing/best_practice">ì¢‹ì€ ì˜ˆì‹œ(Best Practice)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ìºì‹±(cache)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë¡œì»¬ ìƒíƒœ ê´€ë¦¬(Local Satte)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">í˜ì´ì§€ë„¤ì´ì…˜(pagination)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë„¤íŠ¸ì›Œí‚¹(networking)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ë„ì›€ì´ ë˜ëŠ” ë„êµ¬ë“¤</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ì„±ëŠ¥ í–¥ìƒì‹œí‚¤ê¸°(performance)</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ë®¤í…Œì´ì…˜(mutation)</h1></header><hr><p><a href="https://www.apollographql.com/docs/react/data/mutations/" target="_blank" rel="noopener noreferrer">Apollo Docs</a>ë¥¼ ë²ˆì—­ ë° ì˜ì—­í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p><hr><p>ì´ì „ ì‹œê°„ì— Apollo Clientë¡œ ë°ì´í„°ë¥¼ fetchí•´ì˜¤ëŠ” ê³¼ì •ì„ ë°°ì› ìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ëŠ” ë®¤í…Œì´ì…˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë²•ì…ë‹ˆë‹¤. ì´ ê¸€ì€ useMutation í›…ì„ graphQL ì„œë²„ì— í˜¸ì¶œí•˜ëŠ” ë²•ì„ ë°°ìš¸ê²ë‹ˆë‹¤. ë˜í•œ ë®¤í…Œì´ì…˜ì„ ë‚ ë¦° ì§í›„ì— ìºì‹œì— ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ê³¼ loadingê³¼ errorê°’ì„ ì¶”ì í•˜ëŠ” ë°©ë²•ê¹Œì§€ ì•Œì•„ë´…ë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="ë®¤í…Œì´ì…˜-êµ¬ì„±">ë®¤í…Œì´ì…˜ êµ¬ì„±<a aria-hidden="true" class="hash-link" href="#ë®¤í…Œì´ì…˜-êµ¬ì„±" title="Direct link to heading">â€‹</a></h3><p>useMutation ë¦¬ì•¡íŠ¸ í›…ì€ Apollo ì•±ì—ì„œ mutationì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œ ì¤‘ìš”í•œ APIì…ë‹ˆë‹¤. mutationì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ê°€ì¥ ë¨¼ì €, useMutationì„ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì½œí•˜ê³  mutationì„ì„ ì•Œë¦¬ëŠ” graphQL stringì„ ë„˜ê²¨ì¤˜ì•¼í•©ë‹ˆë‹¤.ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ, useMutationì€ ì¼ë ¨ì˜ ê°’ë“¤ì„ ë¦¬í„´í•´ì¤ë‹ˆë‹¤.</p><ol><li><p>ì–´ë””ì„œë“  ì½œí•  ìˆ˜ ìˆëŠ” mutate í•¨ìˆ˜</p></li><li><p>ì—¬ëŸ¬ fieldê°€ ë“¤ì–´ìˆëŠ” ë°ì´í„° object(loading, error, data ...)</p></li></ol><p>ê·¸ëŸ¼ ì˜ˆë¥¼ ë“¤ì–´ë´…ì‹œë‹¤. ì²«ì§¸ë¡œ <code>ADD_TODO</code>ë¼ëŠ” graphQL mutationì„ ë§Œë“¤ì–´ë´…ë‹ˆë‹¤. ê°„ë‹¨íˆ to-do listì— í•  ì¼ í•˜ë‚˜ë¥¼ ì¶”ê°€í•˜ëŠ” ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤. query document í˜•íƒœë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” gql í•¨ìˆ˜ë¡œ ê°ì‹¸ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> gql</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useMutation </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> from &#x27;</span><span class="token directive function" style="color:#d73a49">@apollo</span><span class="token plain">/client&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const </span><span class="token constant" style="color:#36acaa">ADD_TODO</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gql`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> AddTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ë‹¤ìŒìœ¼ë¡œ, AddToDoë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì…ë ¥ë°›ì•„ì„œ ì œì¶œí•˜ëŠ” React ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì—¬ê¸° ì•ˆì— ì•„ê¹Œ ë§Œë“ ADD_TODOë¥¼ ë„˜ê²¨ì¤„ê²ë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function AddTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useMutation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ADD_TODO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSubmit</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          e.preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          addTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;</span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;button </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token plain">&gt;Add Todo&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="ë®¤í…Œì´ì…˜-í•¨ìˆ˜-í˜¸ì¶œí•˜ê¸°-calling-the-mutate-function">ë®¤í…Œì´ì…˜ í•¨ìˆ˜ í˜¸ì¶œí•˜ê¸° (Calling the mutate function)<a aria-hidden="true" class="hash-link" href="#ë®¤í…Œì´ì…˜-í•¨ìˆ˜-í˜¸ì¶œí•˜ê¸°-calling-the-mutate-function" title="Direct link to heading">â€‹</a></h3><p>useMutation í›…ì€ useQueryì²˜ëŸ¼ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ ëŒ€ì‹ ì— ì„ ì–¸í•  ë•Œ ë°›ì€ mutate í•¨ìˆ˜(ìœ„ì— ì½”ë“œì—ì„œ addToDoê°€ í•¨ìˆ˜ì…ë‹ˆë‹¤) ë¥¼ ë¦¬í„´ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì›í•˜ëŠ” ê³³ì—ì„œ ì›í•˜ëŠ” ë•Œ ì½œí•˜ë©´ ë©ë‹ˆë‹¤. ìœ„ ì½”ë“œì—ì„œ ë³´ë©´ submit ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ ì½œí•˜ì£ </p><h3 class="anchor anchorWithStickyNavbar_31ik" id="ì˜µì…˜-ì¶”ê°€í•˜ê¸°-providing-option">ì˜µì…˜ ì¶”ê°€í•˜ê¸° (Providing option)<a aria-hidden="true" class="hash-link" href="#ì˜µì…˜-ì¶”ê°€í•˜ê¸°-providing-option" title="Direct link to heading">â€‹</a></h3><p>useMutationê³¼ mutate í•¨ìˆ˜ ë‘˜ ë‹¤ ë‹¤ìŒ ë§í¬ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ëª¨ë“  optionì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ë§Œ ì•Œì•„ë‘ì…”ì•¼ í•  ì ì€, ì–´ë–¤ ì˜µì…˜ì„ ì£¼ë˜ mutate functionì€ useMutationì— ì¢…ì†ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë§Œì•½ ê°™ì€ ì˜µì…˜ì„ ì¤¬ë‹¤ë©´ useMutationì— ì¤€ ì˜µì…˜ì´ mutate functionì— ì¤€ ì˜µì…˜ì„ ë®ì–´ì”ë‹ˆë‹¤.
ì˜µì…˜ìœ„ì˜ ì˜ˆì‹œì—ì„œ, addToDo í•¨ìˆ˜ì— variablesë¥¼ ì¤¬ìŠµë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="ë®¤í…Œì´ì…˜-ìƒíƒœ-ì¶”ì í•˜ê¸°-tracking-mutation-status">ë®¤í…Œì´ì…˜ ìƒíƒœ ì¶”ì í•˜ê¸° (Tracking mutation status)<a aria-hidden="true" class="hash-link" href="#ë®¤í…Œì´ì…˜-ìƒíƒœ-ì¶”ì í•˜ê¸°-tracking-mutation-status" title="Direct link to heading">â€‹</a></h3><p>ë®¤í…Œì´íŠ¸ í•¨ìˆ˜ì™€ ë”ë¶ˆì–´ useMutation í›…ì€ ë®¤í…Œì´ì…˜ì˜ í˜„ì¬ ì‹¤í–‰ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ë¥¼ ë¦¬í„´ë°›ìŠµë‹ˆë‹¤.
ê·¸ ì•ˆì—ëŠ” ë®¤í…Œì´íŠ¸ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ì¸ <strong>called</strong> , ë®¤í…Œì´ì…˜ ê²°ê³¼ê°’ì´ ì˜¤ê³  ìˆëŠ”ì§€ì˜ ì—¬ë¶€ì¸ <strong>loading</strong> ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="ë®¤í…Œì´ì…˜-í›„-ìºì‹œ-ì—…ë°ì´íŠ¸-updating-the-cache-after-a-mutation">ë®¤í…Œì´ì…˜ í›„ ìºì‹œ ì—…ë°ì´íŠ¸ (Updating the cache after a mutation)<a aria-hidden="true" class="hash-link" href="#ë®¤í…Œì´ì…˜-í›„-ìºì‹œ-ì—…ë°ì´íŠ¸-updating-the-cache-after-a-mutation" title="Direct link to heading">â€‹</a></h3><p>ë®¤í…Œì´ì…˜ì„ ì‹¤í–‰í•˜ê³ ë‚˜ë©´ ì„œë²„ì‚¬ì´ë“œ ë°ì´í„°ê°€ ë³€í•©ë‹ˆë‹¤. ë§Œì•½ ê·¸ ë°ì´í„°ê°€ ìºì‹œì— ë‚¨ì•„ìˆë‹¤ë©´ ê·¸ ë°±ì—”ë“œ ë°ì´í„°ì™€ ìºì‹œë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ìºì‹œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.</p><ol><li>ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í•˜ë‚˜ì˜ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í–ˆì„ ë•Œ</li></ol><p>ë§Œì•½ ë®¤í…Œì´ì…˜ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë°ì´í„° í•˜ë‚˜ë¥¼ ì—…ë°ì´íŠ¸ í–ˆì„ ë•Œ, ìë™ìœ¼ë¡œ ë®¤í…Œì´ì…˜ì´ ê°’ì„ ë¦¬í„´í•  ë•Œ ìºì‹œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ë®¤í…Œì´ì…˜ì´ ë°˜ë“œì‹œ ì—…ë°ì´íŠ¸ ëœ ë°ì´í„°ì˜ <strong>id</strong> ë¥¼ ë¦¬í„´í•´ì•¼í•©ë‹ˆë‹¤. ë‹¤í–‰íˆë„ ì•„í´ë¡œì˜ ëª¨ë“  ë®¤í…Œì´ì…˜ì´ ì´ê±¸ ê¸°ë³¸ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p><p>ì•„ë˜ todo listì—ì„œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´í…œì„ mutateí•˜ëŠ” ì˜ˆì‹œë¥¼ ë´…ì‹œë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const </span><span class="token constant" style="color:#36acaa">UPDATE_TODO</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gql`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> UpdateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function Todos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> loading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">GET_TODOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">updateTodo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useMutation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">UPDATE_TODO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">loading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> return &lt;p&gt;Loading</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">&lt;/p&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> return &lt;p&gt;</span><span class="token attr-name" style="color:#00a4db">Error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">&lt;/p&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return data.todos.map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;p&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">type</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          onSubmit</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            updateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;</span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;button </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token plain">&gt;Update Todo&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ UPDATE_TODO ë®¤í…Œì´íŠ¸ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œì¼°ì„ ë•Œ, ë®¤í…Œì´ì…˜ì€ ì—…ë°ì´íŠ¸ ëœ ë°ì´í„°ì˜ idì™€ ìƒˆë¡­ê²Œ ë³€í•œ typeê¹Œì§€ ë‘ ê°€ì§€ ë°ì´í„°ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ idë¡œ ë°ì´í„°ë¥¼ ìºì‹±í•˜ê¸° ë•Œë¬¸ì—, ì–´ë–»ê²Œ ìë™ìœ¼ë¡œ idì— ë§ëŠ” ë°ì´í„°ë¥¼ ìºì‹œì— ì—…ë°ì´íŠ¸í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ ì•±ì˜ UIë„ ìë™ìœ¼ë¡œ ë³€í•˜ê² ì§€ìš”?</p><ol start="2"><li>entityê°€ ì—¬ëŸ¬ê°œì¼ ë–„ (Making all other cache updates)</li></ol><p>ë§Œì•½ ë®¤í…Œì´ì…˜ì´ 2ê°œ ì´ìƒì˜ ì—”í‹°í‹°ë¥¼ ë³€í™”ì‹œí‚¨ë‹¤ê±°ë‚˜ ìƒì„±ì´ë‚˜ ì‚­ì œê°™ì€ ì‘ì—…ì„ í•  ë•Œ ìºì‹œëŠ” ê·¸ ê²°ê³¼ê°’ì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ ìœ„í•´ <strong>update</strong>í•¨ìˆ˜ë¥¼ useMutationì— ì˜µì…˜ìœ¼ë¡œ ë¼ì›Œë„£ì–´ì•¼í•©ë‹ˆë‹¤.
update í•¨ìˆ˜ì˜ ëª©ì ì€ ë®¤í…Œì´ì…˜ì„ í†µí•´ ë°”ë€ ì„œë²„ ë°ì´í„°ë¥¼ ìºì‹œ ë°ì´í„°ì™€ ë™ê¸°í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒ ì˜ˆì‹œë¥¼ ë³´ì„¸ìš”</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const </span><span class="token constant" style="color:#36acaa">GET_TODOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gql`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> GetTodos </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    todos </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function AddTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useMutation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ADD_TODO</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> addTodo </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cache.modify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">fields</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          todos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">existingTodos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            const newTodoRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cache.writeFragment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token attr-name" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> addTodo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token attr-name" style="color:#00a4db">fragment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gql`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">NewTodo</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              `</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">...</span><span class="token fragment function" style="color:#d73a49">existingTodos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newTodoRef</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSubmit</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          e.preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          addTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;</span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;button </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token plain">&gt;Add Todo&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ì½”ë“œë¥¼ ë³´ë©´, update í•¨ìˆ˜ëŠ” ìºì‹œ ê°ì²´ë¥¼ ë„˜ê²¨ë°›ê³  <code>readQuery</code>ë‚˜ <code>writeQuery</code>, <code>readFragment</code>, <code>writeFragment</code>, <code>modify</code>ê°™ì€ ìºì‹œì— ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” Cache APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
ì´ëŸ° ë©”ì†Œë“œë“¤ì€ graphQL ì„œë²„ì™€ í†µì‹ í•˜ë“¯ cacheë¥¼ ì§ì ‘ ì¡°ì‘í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</p><p>update functionì€ ë˜í•œ dataê°€ í¬í•¨ëœ ê°ì²´ë¥¼ ë„˜ê²¨ë°›ìŠµë‹ˆë‹¤. ì´ê±¸ ê°€ì§€ê³  <code>cache.writeQuery</code>ë‚˜ <code>cache.modify</code> ê°™ì€ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.</p><p>ADD_TODO ë®¤í…Œì´ì…˜ì´ ìœ„ ì˜ˆì œì—ì„œ ì‹¤í–‰ë  ë•Œ, ìƒˆë¡­ê²Œ ì¶”ê°€ë˜ì–´ ë¦¬í„´ ëœ ê°ì²´ëŠ” ìºì‹œì— ì €ì¥ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ GET_TODOS ì¿¼ë¦¬ê°€ ë°›ì•„ì˜¨, ì´ì „ì— ìºì‹œì— ì €ì¥ë˜ì–´ ìˆë˜ todosëŠ” ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ë§ì€ ë‹¤ì‹œ ë§í•´ GET_TODOS ì¿¼ë¦¬ëŠ” ìƒˆë¡­ê²Œ ì¶”ê°€ëœ todo ê°ì²´ë¥¼ todo listì— ë°˜ì˜í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p><p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ cache.modifyë¼ëŠ” ë©”ì†Œë“œë¥¼ ì“¸ê»€ë°, ì´ ë©”ì†Œë“œëŠ” ê°•ì œë¡œ ìºì‹œ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê±°ë‚˜ ì¶”ê°€í•©ë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œ GET_TODOS ì¿¼ë¦¬ì˜ ê²°ê³¼ê°’ì€ cacheì˜ ROOT_QUERY.todos ë°°ì—´ì— ì €ì¥ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” todos modifier í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ë°°ì—´ë¡œ ìºì‹œëœ ë°°ì—´ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. <code>cache.writeFragment</code> ë©”ì†Œë“œë¥¼ í™œìš©í•´ì„œ ìš°ë¦¬ëŠ” ìƒˆë¡œ ì¶”ê°€ë  todo ì•„ì´í…œì˜ reference(idê°™ì€ ê²ƒ)ë¥¼ ì–»ì„ ìˆ˜ ìˆê³  ê·¸ê±¸ ìºì‹œì˜ ROOT_QUERYë°°ì—´ì— ì €ì¥í•˜ëŠ” ê²ƒì´ì£ .</p><p>ìœ„ì˜ ê³¼ì •ì„ ê±°ì³ ë³€ê²½ëœ ìºì‹œëœ ë°ì´í„°ë“¤ì€ ìë™ìœ¼ë¡œ broadcastí•©ë‹ˆë‹¤. ì´ ë§ì€, ì´ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¿¼ë¦¬ë“¤ì´ listeningí•˜ê³  ìˆë‹¤ê°€ ë³€ê²½ë˜ëŠ” ì¦‰ì‹œ ê·¸ ë°ì´í„°ì™€ ê´€ë ¨ëœ UIë¥¼ updateí•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. (Active Queryë“¤ ì¤‘ì— ì´ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ëª¨ë“  ìºì‹œë“¤ì—ê²Œ ì „íŒŒë©ë‹ˆë‹¤)</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="loadingê³¼-error-ìƒíƒœê°’-ì¶”ì í•˜ê¸°-tracking-loading-and-error-states">loadingê³¼ error ìƒíƒœê°’ ì¶”ì í•˜ê¸° (Tracking loading and error states)<a aria-hidden="true" class="hash-link" href="#loadingê³¼-error-ìƒíƒœê°’-ì¶”ì í•˜ê¸°-tracking-loading-and-error-states" title="Direct link to heading">â€‹</a></h3><p>useMutation í›…ì—ëŠ” ë®¤í…Œì´íŠ¸ í•¨ìˆ˜ì˜ loadingê³¼ error ìƒíƒœê°’ì„ ì¶”ì í•  ìˆ˜ ìˆëŠ” ë§¤ì»¤ë‹ˆì¦˜ì´ ìˆìŠµë‹ˆë‹¤.
ë‹¨ì¼ ì—”í‹°í‹°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ìœ„ì˜ ì˜ˆì œë¥¼ ë‹¤ì‹œí•œë²ˆ ì‚´í´ë³¼ê¹Œìš”?</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function Todos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">loading</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> queryLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> queryError</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">GET_TODOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateTodo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">loading</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mutationLoading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mutationError </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useMutation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">UPDATE_TODO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryLoading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> return &lt;p&gt;Loading</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">&lt;/p&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queryError</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> return &lt;p&gt;</span><span class="token attr-name" style="color:#00a4db">Error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">&lt;/p&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return data.todos.map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;p&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">type</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          onSubmit</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.preventDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            updateTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain">.value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> &#x27;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;</span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ref</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&gt; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;button </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;submit&quot;</span><span class="token plain">&gt;Update Todo&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">mutationLoading </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> &lt;p&gt;Loading</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">&lt;/p&gt;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">mutationError </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> &lt;p&gt;</span><span class="token attr-name" style="color:#00a4db">Error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> Please try again&lt;/p&gt;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ìœ„ ì½”ë“œì—ì„œ UIë‚´ì—ì„œ ë®¤í…Œì´ì…˜ì˜ ìƒíƒœë¥¼ ì¶”ì í•  ìˆ˜ ìˆëŠ” loadingê³¼ error ê°’ì„ useMutationì´ ë¦¬í„´í•´ì£¼ëŠ” result ê°ì²´ì—ì„œ êµ¬ì¡°ë¶„í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì½œë°±ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸¸ ì›í•˜ì‹ ë‹¤ë©´ onCompleteê³¼ onError ì˜µì…˜ë„ ì œê³µí•˜ë‹ˆ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="usemutation-api">useMutation API<a aria-hidden="true" class="hash-link" href="#usemutation-api" title="Direct link to heading">â€‹</a></h2><p>ì œê³µë˜ëŠ” ì˜µì…˜ê³¼ ë¦¬í„´ë˜ëŠ” result ê°ì²´ê°€ ê°€ì§„ fieldë“¤ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p><p>useMutationì„ ì½œí•  ë•Œ ëŒ€ë¶€ë¶„ì˜ ì˜µì…˜ë“¤ì€ ìƒëµí•´ë„ ì¢‹ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ì˜µì…˜ë“¤ë„ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê³  ê³„ì‹œëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤. <a href="https://www.apollographql.com/docs/react/api/react/hooks/" target="_blank" rel="noopener noreferrer">ì´ ë§í¬</a>ì—ì„œ ë” ìì„¸í•œ ì‚¬ìš©ë²•ì„ ê³µë¶€í•˜ì„¸ìš”</p><table><thead><tr><th>ì˜µì…˜</th><th>íƒ€ì…</th><th>ì„¤ëª…</th></tr></thead><tbody><tr><td>mutation</td><td>DocumentNode</td><td>graphql mutation document</td></tr><tr><td>variables</td><td>{<!-- -->[key:string]<!-- -->:any}</td><td>mutationì´ ì‹¤í–‰ë˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ë³€ìˆ˜ì˜ ê°ì²´ì…ë‹ˆë‹¤.</td></tr><tr><td>update</td><td>(cache: DataProxy, mutationResult: FetchResult)</td><td>mutationì´ ë°œìƒí•˜ê³  ìºì‹œë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</td></tr><tr><td>ignoreResults</td><td>boolean</td><td>ì´ ê°’ì´ trueë©´ ë¦¬í„´ë˜ëŠ” ë°ì´í„°ëŠ” mutationì˜ ê²°ê³¼ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</td></tr><tr><td>optimisticResponse</td><td>object</td><td>ì„œë²„ë¡œë¶€í„° resultê°’ì´ ì˜¤ê¸° ì „ì— mutation ê²°ê³¼ê°’ì„ ë°›ëŠ”ê²ƒì´ë‹¤. optimistic UIë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.</td></tr><tr><td>refetchQueries</td><td>Array&lt;string or { query: DocumentNode, variables?: TVariables}&gt; or ((mutationResult: FetchResult) =&gt; Array&lt;string or { query: DocumentNode, variables?: TVariables}&gt;)</td><td>mutationì´ ë°œìƒí•˜ê³  ì–´ë–¤ì¿¼ë¦¬ë¥¼ ë¦¬í˜ì¹˜í• ì§€ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´. ì¿¼ë¦¬ì˜ ë°°ì—´ì¼ ìˆ˜ë„ ìˆê³  ë¦¬í˜ì¹˜ë  ì¿¼ë¦¬ë“¤ì˜ ì´ë¦„(Document)ì˜ ë°°ì—´ì¼ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. variablesë¥¼ ì•ˆì£¼ë©´ ê°€ì¥ ìµœê·¼ì— ì‹¤í–‰í•œ ì¿¼ë¦¬ë¥¼ ë˜ ì‹¤í–‰í•©ë‹ˆë‹¤.</td></tr><tr><td>awaitRefetchQueries</td><td>boolean</td><td>refetchQueriesëŠ” ë™ê¸°ë¡œ ë™ì‘í•˜ëŠ”ë° awaitRefetchQueriesë¥¼ trueë¡œ ì£¼ë©´ ë¹„ë™ê¸°ë¡œ ë™ì‘í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td></tr><tr><td>onComplete</td><td>(data: TData) =&gt; void</td><td>mutationì´ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.</td></tr><tr><td>onError</td><td>(error: ApolloError) =&gt; void</td><td>mutationì´ ì‹¤íŒ¨í•˜ë©´ ì‹¤í–‰ë˜ëŠ” ì½œë°±í•¨ìˆ˜ì…ë‹ˆë‹¤.</td></tr><tr><td>context</td><td>Record&lt;string,any&gt;</td><td>ì»´í¬ë„ŒíŠ¸ì™€ ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.</td></tr><tr><td>client</td><td>ApolloClinet</td><td>ApolloClinet ì¸ìŠ¤í„´ìŠ¤. ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ” ìƒí™©ì´ ì•„ë‹ˆë©´ providerì˜ clientë¥¼ ì”ë‹ˆë‹¤.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="usemutation-response">useMutation Response<a aria-hidden="true" class="hash-link" href="#usemutation-response" title="Direct link to heading">â€‹</a></h2><p>useMutation Responseê°’ì€ ë°°ì—´ í˜•íƒœë¡œ ë°›ì„ ìˆ˜ ìˆëŠ”ë°, mutate functionì´ ì²«ë²ˆì§¸ë¡œ ì˜¤ê³  ë‘ë²ˆì§¸ë¡œëŠ” mutationì˜ ê²°ê³¼ê°’ì´ ì˜µë‹ˆë‹¤.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//(options?: MutationOptions) =&gt; Promise&lt;FetchResult&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">mutateFunction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loading </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useMutation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">MUTATION_DOCS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">...</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>mutate</td><td>UIì—ì„œ mutationì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜. variables, refetchQueriesê°™ì€ ì˜µì…˜ì„ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.</td><td>UIì—ì„œ mutationì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜. variables, refetchQueriesê°™ì€ ì˜µì…˜ì„ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.</td></tr></tbody></table><p>ë‹¤ìŒì€ ê²°ê³¼(Result) ê°ì²´ì˜ í•„ë“œë“¤ì…ë‹ˆë‹¤.</p><hr><table><thead><tr><th>ê°’</th><th>íƒ€ì…</th><th>ì„¤ëª…</th></tr></thead><tbody><tr><td>data</td><td>TData</td><td>mutationì˜ ê²°ê³¼ê°’. ë§Œì•½ IgnoreResultsê°’ì„ trueë¡œ ì¤˜ë²„ë¦¬ë©´ ì´ dataê°’ì´ undefinedê°€ ë©ë‹ˆë‹¤</td></tr><tr><td>loading</td><td>boolean</td><td>mutationì˜ í˜„ì¬ ì§„í–‰ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ” booleanê°’ì…ë‹ˆë‹¤.</td></tr><tr><td>error</td><td>ApolloError</td><td>ë§Œì•½ mutationì´ ì„œë²„ì— ê°”ë‹¤ê°€ ì‹¤íŒ¨í•˜ê³  ëŒì•„ì˜¤ë©´ ì´ìœ ì™€ í•¨ê»˜ ì—ëŸ¬ë¥¼ ë±‰ìŠµë‹ˆë‹¤.</td></tr><tr><td>called</td><td>boolean</td><td>mutation í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ trueê°€ ë©ë‹ˆë‹¤</td></tr><tr><td>client</td><td>ApolloClient</td><td>ApolloClient ì¸ìŠ¤í„´ìŠ¤. client.writeDataë‚˜ client.readQueryê°™ì€ ìºì‹œ ë©”ì†Œë“œë¥¼ update function ì™¸ ì§€ì—­ì—ì„œ ìˆ˜í–‰í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="ê¸€ì„-ë§ˆì¹˜ë©°">ê¸€ì„ ë§ˆì¹˜ë©°<a aria-hidden="true" class="hash-link" href="#ê¸€ì„-ë§ˆì¹˜ë©°" title="Direct link to heading">â€‹</a></h2><p>useQueryì™€ useMutation í›…ì€ graphQLì„ ì›í™œí•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ Apollo Clientsì˜ í•µì‹¬ APIì…ë‹ˆë‹¤. ì´ì œ ë§ì´ ìµìˆ™í•´ì¡Œì„ê²ë‹ˆë‹¤.
ë” ë‚˜ì•„ê°€ ì¶”í›„ í¬ìŠ¤íŒ…ë  ê³ ê¸‰ ê¸°ëŠ¥ë“¤ê¹Œì§€ë„ ì‚¬ìš©í•´ë³´ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hojunin/apollo-client-docs/docs/fetcing/mutation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/fetcing/query"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->ì¿¼ë¦¬(query)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/fetcing/refetch"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ë‹¤ì‹œ ì¡°íšŒí•˜ê¸°(Refetch)<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ë®¤í…Œì´ì…˜-êµ¬ì„±" class="table-of-contents__link toc-highlight">ë®¤í…Œì´ì…˜ êµ¬ì„±</a></li><li><a href="#ë®¤í…Œì´ì…˜-í•¨ìˆ˜-í˜¸ì¶œí•˜ê¸°-calling-the-mutate-function" class="table-of-contents__link toc-highlight">ë®¤í…Œì´ì…˜ í•¨ìˆ˜ í˜¸ì¶œí•˜ê¸° (Calling the mutate function)</a></li><li><a href="#ì˜µì…˜-ì¶”ê°€í•˜ê¸°-providing-option" class="table-of-contents__link toc-highlight">ì˜µì…˜ ì¶”ê°€í•˜ê¸° (Providing option)</a></li><li><a href="#ë®¤í…Œì´ì…˜-ìƒíƒœ-ì¶”ì í•˜ê¸°-tracking-mutation-status" class="table-of-contents__link toc-highlight">ë®¤í…Œì´ì…˜ ìƒíƒœ ì¶”ì í•˜ê¸° (Tracking mutation status)</a></li><li><a href="#ë®¤í…Œì´ì…˜-í›„-ìºì‹œ-ì—…ë°ì´íŠ¸-updating-the-cache-after-a-mutation" class="table-of-contents__link toc-highlight">ë®¤í…Œì´ì…˜ í›„ ìºì‹œ ì—…ë°ì´íŠ¸ (Updating the cache after a mutation)</a></li><li><a href="#loadingê³¼-error-ìƒíƒœê°’-ì¶”ì í•˜ê¸°-tracking-loading-and-error-states" class="table-of-contents__link toc-highlight">loadingê³¼ error ìƒíƒœê°’ ì¶”ì í•˜ê¸° (Tracking loading and error states)</a></li><li><a href="#usemutation-api" class="table-of-contents__link toc-highlight">useMutation API</a></li><li><a href="#usemutation-response" class="table-of-contents__link toc-highlight">useMutation Response</a></li><li><a href="#ê¸€ì„-ë§ˆì¹˜ë©°" class="table-of-contents__link toc-highlight">ê¸€ì„ ë§ˆì¹˜ë©°</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">HOJUN IN</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/hojunin/apollo-client-docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">ë¬¸ì˜í•˜ê¸°</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 HojunIn</div></div></div></footer></div>
<script src="/assets/js/runtime~main.748b3031.js"></script>
<script src="/assets/js/main.1a53649c.js"></script>
</body>
</html>